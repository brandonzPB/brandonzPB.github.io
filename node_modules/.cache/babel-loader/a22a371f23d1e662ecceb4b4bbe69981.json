{"ast":null,"code":"import _regeneratorRuntime from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{Link,Route,Redirect}from'react-router-dom';import userService from'../../services/userService';import{UserContext}from'../../contexts/UserContext';import'./user.css';var ForgotPassword=function ForgotPassword(){var _useContext=useContext(UserContext),reset=_useContext.reset,setReset=_useContext.setReset;var _useState=useState({email:''}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState({upset:false}),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState({state:false}),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},name,value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var emailExists,resetToken;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setError(_objectSpread(_objectSpread({},error),{},{upset:false}));setLoading(_objectSpread(_objectSpread({},loading),{},{state:false}));if(!form.email.trim()){_context.next=9;break;}_context.next=6;return userService.postResetRequest(form.email);case 6:emailExists=_context.sent;_context.next=10;break;case 9:return _context.abrupt(\"return\",setError(_objectSpread(_objectSpread({},error),{},{upset:true})));case 10:if(!emailExists){_context.next=16;break;}setLoading(_objectSpread(_objectSpread({},loading),{},{state:true}));_context.next=14;return userService.getResetCode(form.email);case 14:resetToken=_context.sent;setReset(_objectSpread(_objectSpread({},reset),{},{resetToken:resetToken.reset_token,email:form.email}));case 16:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();if(reset.resetToken.trim()){return/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/user/reset/forgot\"},/*#__PURE__*/React.createElement(Redirect,{to:\"/user/reset/code\"}));}return/*#__PURE__*/React.createElement(\"div\",{className:\"forgot-password-form\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"p\",{className:\"return-home-link\"},\"Return Home\")),/*#__PURE__*/React.createElement(\"div\",{className:\"loading\",style:{display:loading.state?'flex':'none'}},/*#__PURE__*/React.createElement(\"span\",{className:\"loading-text\"},\"Sending code...\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"email-forgot-input\"},/*#__PURE__*/React.createElement(\"label\",null,\"Enter Email: \"),/*#__PURE__*/React.createElement(\"span\",{className:\"forgot-info\"},\"Page will redirect once email has been sent\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"email\",value:form.email,onChange:handleChange,style:{border:error.upset?'2px solid red':'none'}})),/*#__PURE__*/React.createElement(\"button\",{className:\"get-code-btn\"},\"Get Code\")));};export default ForgotPassword;","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/components/user/ForgotPassword.js"],"names":["React","useState","useContext","Link","Route","Redirect","userService","UserContext","ForgotPassword","reset","setReset","email","form","setForm","upset","error","setError","state","loading","setLoading","handleChange","event","target","name","value","handleSubmit","preventDefault","trim","postResetRequest","emailExists","getResetCode","resetToken","reset_token","display","border"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { Link, Route, Redirect } from 'react-router-dom';\nimport userService from '../../services/userService';\nimport { UserContext } from '../../contexts/UserContext';\nimport './user.css';\n\nconst ForgotPassword = () => {\n  const { reset, setReset } = useContext(UserContext);\n\n  const [form, setForm] = useState({ email: '' });\n\n  const [error, setError] = useState({ upset: false });\n\n  const [loading, setLoading] = useState({ state: false });\n\n  const handleChange = event => {\n    const { name, value } = event.target;\n\n    setForm({\n      ...form,\n      [name]: value\n    });\n  }\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    setError({\n      ...error,\n      upset: false\n    });\n\n    setLoading({\n      ...loading,\n      state: false\n    });\n\n    let emailExists;\n\n   if (form.email.trim()) {\n      emailExists = await userService.postResetRequest(form.email);\n    } else {\n      return setError({\n        ...error,\n        upset: true\n      });\n    }\n\n    if (emailExists) {\n      setLoading({\n        ...loading,\n        state: true\n      });\n\n      const resetToken = await userService.getResetCode(form.email);\n\n      setReset({\n        ...reset,\n        resetToken: resetToken.reset_token,\n        email: form.email\n      });\n    }\n  }\n\n  if (reset.resetToken.trim()) {\n    return (\n      <Route exact path=\"/user/reset/forgot\">\n        <Redirect to=\"/user/reset/code\" />\n      </Route>\n    )\n  }\n\n  return (\n    <div className=\"forgot-password-form\">\n      <Link to=\"/\">\n        <p className=\"return-home-link\">Return Home</p>\n      </Link>\n      <div className=\"loading\" style={{ display: loading.state ? 'flex' : 'none' }}>\n        <span className=\"loading-text\">Sending code...</span>\n      </div>\n      <form onSubmit={handleSubmit}>\n        <div className=\"email-forgot-input\">\n          <label>Enter Email: </label>\n          <span className=\"forgot-info\">Page will redirect once email has been sent</span>\n          <input \n            type=\"text\"\n            name=\"email\"\n            value={form.email}\n            onChange={handleChange}\n            style={{\n              border: error.upset ? '2px solid red' : 'none'\n            }}\n          />\n        </div>\n\n        <button className=\"get-code-btn\">Get Code</button>\n      </form>\n    </div>\n  )\n}\n\nexport default ForgotPassword;\n"]},"metadata":{},"sourceType":"module"}