{"ast":null,"code":"const getAge = (birthTime, string = true) => {\n  const currentTime = Date.now();\n  const difference = currentTime - birthTime;\n  const dayDifference = difference / 1000 / 86400;\n  const minutes = dayDifference * 1440;\n  const days = dayDifference % 365;\n  const years = (dayDifference - days) / 365;\n  return string ? `${years} years, and ${Math.round(days)} days old` : minutes;\n};\n\nexports.checkCreatureStreak = (thisDay, creature) => {\n  // checks if streak is broken, constant, or needs to be incremented\n  console.log('creature', creature); // if (streak_day === 6) { // Streak continues if current week day is 0 and less than 24 hours passed\n  //   if (thisDay !== 0 && thisDay !== 6) { // Streak broken\n  //     return 'broken';\n  //   } else if (thisDay === 0) { // Next week day\n  //     // if more than 2 days passed; streak is over\n  //     // else, increment streak count\n  //     const minDifference = getAge(streak_timestamp, false);\n  //     return minDifference > 2880 ? 'broken' : 'increment';\n  //   } else { // Same day\n  //     return 'constant';\n  //   }\n  // } else { // Streak continues if current week day is streak.timestamp + 1, and if less than 24 hours passed\n  //   if (thisDay === streak_day + 1) {\n  //     // if more than 2 days passed; streak is over\n  //     // else, increment streak count\n  //     const minDifference = getAge(streak_timestamp, false);\n  //     return minDifference > 2880 ? 'broken' : 'increment';\n  //   } else if (streak_day === thisDay) { // Same day\n  //     return 'constant';\n  //   } else {\n  //     return 'broken';\n  //   }\n  // }\n};\n\nexports.updateCreatureStreak = (creature, userDispatch, finish) => {\n  const newCount = creature.streak_count + 1;\n  const newTimestamp = Date.now();\n  const newDay = new Date().getDay();\n  userDispatch({\n    type: 'UPDATE_STREAK',\n    creature: {\n      id: creature.id,\n      newCount,\n      newTimestamp,\n      newDay\n    }\n  });\n  finish('creature', creature, 'stats');\n  return creature;\n};\n\nexports.resetCreatureStreak = (creature, userDispatch, finish) => {\n  const newCount = 0;\n  const newTimestamp = Date.now();\n  const newDay = new Date().getDay();\n  userDispatch({\n    type: 'UPDATE_STREAK',\n    creature: {\n      id: creature.id,\n      newCount,\n      newTimestamp,\n      newDay\n    }\n  });\n  finish('creature', creature, 'stats');\n  return creature;\n};","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/modules/streak.js"],"names":["getAge","birthTime","string","currentTime","Date","now","difference","dayDifference","minutes","days","years","Math","round","exports","checkCreatureStreak","thisDay","creature","console","log","updateCreatureStreak","userDispatch","finish","newCount","streak_count","newTimestamp","newDay","getDay","type","id","resetCreatureStreak"],"mappings":"AAAA,MAAMA,MAAM,GAAG,CAACC,SAAD,EAAYC,MAAM,GAAG,IAArB,KAA8B;AAC3C,QAAMC,WAAW,GAAGC,IAAI,CAACC,GAAL,EAApB;AACA,QAAMC,UAAU,GAAGH,WAAW,GAAGF,SAAjC;AAEA,QAAMM,aAAa,GAAID,UAAU,GAAG,IAAd,GAAsB,KAA5C;AAEA,QAAME,OAAO,GAAGD,aAAa,GAAG,IAAhC;AACA,QAAME,IAAI,GAAGF,aAAa,GAAG,GAA7B;AACA,QAAMG,KAAK,GAAG,CAACH,aAAa,GAAGE,IAAjB,IAAyB,GAAvC;AAEA,SAAOP,MAAM,GAAI,GAAEQ,KAAM,eAAcC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAiB,WAA3C,GAAwDD,OAArE;AACD,CAXD;;AAaAK,OAAO,CAACC,mBAAR,GAA8B,CAACC,OAAD,EAAUC,QAAV,KAAuB;AACnD;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBF,QAAxB,EAHmD,CAKnD;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACD,CAnCD;;AAqCAH,OAAO,CAACM,oBAAR,GAA+B,CAACH,QAAD,EAAWI,YAAX,EAAyBC,MAAzB,KAAoC;AACjE,QAAMC,QAAQ,GAAGN,QAAQ,CAACO,YAAT,GAAwB,CAAzC;AACA,QAAMC,YAAY,GAAGpB,IAAI,CAACC,GAAL,EAArB;AACA,QAAMoB,MAAM,GAAI,IAAIrB,IAAJ,EAAD,CAAasB,MAAb,EAAf;AAEAN,EAAAA,YAAY,CAAC;AAAEO,IAAAA,IAAI,EAAE,eAAR;AAAyBX,IAAAA,QAAQ,EAAE;AAC9CY,MAAAA,EAAE,EAAEZ,QAAQ,CAACY,EADiC;AAE9CN,MAAAA,QAF8C;AAG9CE,MAAAA,YAH8C;AAI9CC,MAAAA;AAJ8C;AAAnC,GAAD,CAAZ;AAOAJ,EAAAA,MAAM,CAAC,UAAD,EAAaL,QAAb,EAAuB,OAAvB,CAAN;AAEA,SAAOA,QAAP;AACD,CAfD;;AAiBAH,OAAO,CAACgB,mBAAR,GAA8B,CAACb,QAAD,EAAWI,YAAX,EAAyBC,MAAzB,KAAoC;AAChE,QAAMC,QAAQ,GAAG,CAAjB;AACA,QAAME,YAAY,GAAGpB,IAAI,CAACC,GAAL,EAArB;AACA,QAAMoB,MAAM,GAAI,IAAIrB,IAAJ,EAAD,CAAasB,MAAb,EAAf;AAEAN,EAAAA,YAAY,CAAC;AAAEO,IAAAA,IAAI,EAAE,eAAR;AAAyBX,IAAAA,QAAQ,EAAE;AAC9CY,MAAAA,EAAE,EAAEZ,QAAQ,CAACY,EADiC;AAE9CN,MAAAA,QAF8C;AAG9CE,MAAAA,YAH8C;AAI9CC,MAAAA;AAJ8C;AAAnC,GAAD,CAAZ;AAOAJ,EAAAA,MAAM,CAAC,UAAD,EAAaL,QAAb,EAAuB,OAAvB,CAAN;AAEA,SAAOA,QAAP;AACD,CAfD","sourcesContent":["const getAge = (birthTime, string = true) => {\n  const currentTime = Date.now();\n  const difference = currentTime - birthTime;\n\n  const dayDifference = (difference / 1000) / 86400;\n\n  const minutes = dayDifference * 1440;\n  const days = dayDifference % 365;\n  const years = (dayDifference - days) / 365;\n\n  return string ? `${years} years, and ${Math.round(days)} days old` : minutes;\n}\n\nexports.checkCreatureStreak = (thisDay, creature) => {\n  // checks if streak is broken, constant, or needs to be incremented\n\n  console.log('creature', creature);\n\n  // if (streak_day === 6) { // Streak continues if current week day is 0 and less than 24 hours passed\n\n  //   if (thisDay !== 0 && thisDay !== 6) { // Streak broken\n  //     return 'broken';\n  //   } else if (thisDay === 0) { // Next week day\n  //     // if more than 2 days passed; streak is over\n  //     // else, increment streak count\n\n  //     const minDifference = getAge(streak_timestamp, false);\n  //     return minDifference > 2880 ? 'broken' : 'increment';\n  //   } else { // Same day\n\n  //     return 'constant';\n  //   }\n\n  // } else { // Streak continues if current week day is streak.timestamp + 1, and if less than 24 hours passed\n    \n  //   if (thisDay === streak_day + 1) {\n  //     // if more than 2 days passed; streak is over\n  //     // else, increment streak count\n\n  //     const minDifference = getAge(streak_timestamp, false);\n  //     return minDifference > 2880 ? 'broken' : 'increment';\n  //   } else if (streak_day === thisDay) { // Same day\n\n  //     return 'constant';\n  //   } else {\n  //     return 'broken';\n  //   }\n  // }\n}\n\nexports.updateCreatureStreak = (creature, userDispatch, finish) => {\n  const newCount = creature.streak_count + 1;\n  const newTimestamp = Date.now();\n  const newDay = (new Date()).getDay();\n\n  userDispatch({ type: 'UPDATE_STREAK', creature: {\n    id: creature.id,\n    newCount,\n    newTimestamp,\n    newDay,\n  }});\n\n  finish('creature', creature, 'stats');\n\n  return creature;\n}\n\nexports.resetCreatureStreak = (creature, userDispatch, finish) => {\n  const newCount = 0;\n  const newTimestamp = Date.now();\n  const newDay = (new Date()).getDay();\n\n  userDispatch({ type: 'UPDATE_STREAK', creature: {\n    id: creature.id,\n    newCount,\n    newTimestamp,\n    newDay,\n  }});\n\n  finish('creature', creature, 'stats');\n  \n  return creature;\n};"]},"metadata":{},"sourceType":"module"}