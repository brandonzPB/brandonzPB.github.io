{"ast":null,"code":"var _jsxFileName = \"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/components/creature/Creature.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport { CreatureContext } from '../../contexts/CreatureContext';\nimport { UserContext } from '../../contexts/UserContext';\nimport * as stats from '../../modules/stats';\nimport CreatureDisplay from './CreatureDisplay';\nimport './creature.css';\nimport * as age from '../../modules/age';\n\nconst lvlUpMusicSrc = require('../../sounds/level-up.mp3');\n\nconst levelUpSound = new Audio(lvlUpMusicSrc);\n\nconst evolveMusicSrc = require('../../sounds/evolve.mp3');\n\nconst evolveSound = new Audio(evolveMusicSrc);\n\nconst Creature = ({\n  creature\n}) => {\n  const {\n    displayObjectives,\n    showCreatureObjectives,\n    expUpdate,\n    toggleExpUpdate,\n    finish\n  } = useContext(CreatureContext);\n  const {\n    user,\n    userDispatch\n  } = useContext(UserContext);\n  const [levelUpdate, setLevelUpdate] = useState(false);\n  const [evolve, setEvolve] = useState(false);\n  const pokeball = !creature.pokeball_number ? 13 : creature.pokeball_number < 14 ? 13 // pokeball\n  : creature.pokeball_number === 14 ? 1 // greatball\n  : creature.pokeball_number === 15 ? 0 : 11; // ultraball : masterball\n\n  const img = require(`../../images/pokeballs/${pokeball}.png`);\n\n  const toggleLevelUpdate = () => {\n    setLevelUpdate(!levelUpdate);\n  };\n\n  const toggleEvolve = () => {\n    setEvolve(!evolve);\n  }; /// STREAK METHODS ///\n\n\n  const updateCreatureStreak = () => {\n    const newCount = creature.streak_count + 1;\n    const newTimestamp = Date.now();\n    const newDay = new Date().getDay();\n    userDispatch({\n      type: 'UPDATE_STREAK',\n      creature: {\n        id: creature.id,\n        newCount,\n        newTimestamp,\n        newDay\n      }\n    });\n    finish('creature', creature, 'stats');\n    return creature;\n  };\n\n  const resetCreatureStreak = () => {\n    const newCount = 0;\n    const newTimestamp = Date.now();\n    const newDay = new Date().getDay();\n    userDispatch({\n      type: 'UPDATE_STREAK',\n      creature: {\n        id: creature.id,\n        newCount,\n        newTimestamp,\n        newDay\n      }\n    });\n    finish('creature', creature, 'stats');\n    return creature;\n  }; /// AUTO-UPDATE HOOKS ///\n  // Updates age, streak, exp, and level\n\n\n  useEffect(() => {\n    /* const birthTime = creature.birth_time;\n    const newAge = age.getAge(birthTime);\n     console.log(creature.is_noob);\n     userDispatch({ type: 'UPDATE_AGE', creature: { newAge, id: creature.id } });\n     finish('creature', creature, 'stats'); */\n\n    /* const streak = checkCreatureStreak();\n    if (streak === 'broken') resetCreatureStreak(); */\n    if (!expUpdate) return; // if (streak === 'increment' || creature.streak_count === 0) updateCreatureStreak();\n\n    if (creature.exp >= creature.exp_goal || creature.is_noob) {\n      levelUpSound.currentTime = 1;\n      levelUpSound.play();\n      const newLevel = creature.level + 1;\n      userDispatch({\n        type: 'LEVEL_UP',\n        creature: {\n          id: creature.id,\n          level: newLevel\n        }\n      });\n      finish('creature', creature, 'stats');\n      return toggleLevelUpdate();\n    }\n\n    toggleExpUpdate();\n  }, [creature.exp]); // Updates creature multipliers\n\n  useEffect(() => {\n    if (!levelUpdate) return;\n    const timer = setTimeout(() => {\n      const difficulty = stats.getCreatureDifficulty(creature.purpose, creature.level);\n      const multiplier = stats.getExpMultiplier(creature.level);\n      userDispatch({\n        type: 'UPGRADE_MULTIPLIERS',\n        creature: {\n          id: creature.id,\n          difficulty,\n          multiplier\n        }\n      });\n      finish('creature', creature, 'stats');\n      const prevGoal = creature.is_noob ? 1 : creature.exp_goal;\n      const newGoal = creature.is_noob ? 9 : stats.getExpGoal(creature.level, difficulty);\n      userDispatch({\n        type: 'LEVEL_UPDATES',\n        creature: {\n          id: creature.id,\n          prevGoal,\n          newGoal\n        }\n      });\n      finish('creature', creature, 'stats');\n      toggleExpUpdate();\n      toggleLevelUpdate();\n\n      if (creature.level === 15 || creature.level === 30 || creature.level === 50 || creature.level == 80) {\n        const newPokeball = creature.level === 30 ? 14 : creature.level === 50 ? 15 : creature.level === 80 ? 16 : creature.pokeball_number;\n        userDispatch({\n          type: 'UPDATE_POKEBALL',\n          creature: {\n            id: creature.id,\n            newPokeball\n          }\n        });\n        finish('creature', creature, 'stats');\n        return toggleEvolve();\n      }\n    }, 100);\n    return () => clearTimeout(timer);\n  }, [levelUpdate]); // Evolves creature\n\n  useEffect(() => {\n    if (!evolve) return;\n    const nextCreatureIndex = creature.evolutions.findIndex(being => being === creature.creature) + 1;\n    if (!creature.evolutions[nextCreatureIndex]) return toggleEvolve();\n\n    if (creature.evolutions[nextCreatureIndex] === 'none') {\n      let newEvoLine = creature.evolutions;\n      newEvoLine.splice(nextCreatureIndex, 1);\n      console.log('newEvoLine', newEvoLine);\n      return toggleEvolve();\n    }\n\n    setTimeout(() => {\n      evolveSound.play();\n      const nextCreature = creature.evolutions[nextCreatureIndex];\n      userDispatch({\n        type: 'EVOLVE',\n        creature: {\n          id: creature.id,\n          nextCreature\n        }\n      });\n      finish('creature', creature, 'stats');\n      return toggleEvolve();\n    }, 800);\n  }, [evolve]); // Sends creature id to context and allows for\n  // The selected creature's objectives to be shown\n\n  const displayCreatureObjectives = () => {\n    showCreatureObjectives(creature.id);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"creature\",\n    style: {\n      backgroundImage: `linear-gradient(rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.6)), url(${img})`,\n      backgroundRepeat: 'no-repeat',\n      backgroundSize: 'cover',\n      backgroundPosition: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CreatureDisplay, {\n    creature: creature,\n    displayObjectives: displayObjectives,\n    displayCreatureObjectives: displayCreatureObjectives,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Creature;","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/components/creature/Creature.js"],"names":["React","useState","useEffect","useContext","CreatureContext","UserContext","stats","CreatureDisplay","age","lvlUpMusicSrc","require","levelUpSound","Audio","evolveMusicSrc","evolveSound","Creature","creature","displayObjectives","showCreatureObjectives","expUpdate","toggleExpUpdate","finish","user","userDispatch","levelUpdate","setLevelUpdate","evolve","setEvolve","pokeball","pokeball_number","img","toggleLevelUpdate","toggleEvolve","updateCreatureStreak","newCount","streak_count","newTimestamp","Date","now","newDay","getDay","type","id","resetCreatureStreak","exp","exp_goal","is_noob","currentTime","play","newLevel","level","timer","setTimeout","difficulty","getCreatureDifficulty","purpose","multiplier","getExpMultiplier","prevGoal","newGoal","getExpGoal","newPokeball","clearTimeout","nextCreatureIndex","evolutions","findIndex","being","newEvoLine","splice","console","log","nextCreature","displayCreatureObjectives","backgroundImage","backgroundRepeat","backgroundSize","backgroundPosition"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { CreatureContext } from '../../contexts/CreatureContext';\nimport { UserContext } from '../../contexts/UserContext';\nimport * as stats from '../../modules/stats';\nimport CreatureDisplay from './CreatureDisplay';\nimport './creature.css';\nimport * as age from '../../modules/age';\n\nconst lvlUpMusicSrc = require('../../sounds/level-up.mp3');\nconst levelUpSound = new Audio(lvlUpMusicSrc);\n\nconst evolveMusicSrc = require('../../sounds/evolve.mp3');\nconst evolveSound = new Audio(evolveMusicSrc);\n\nconst Creature = ({ creature }) => {\n  const { displayObjectives, showCreatureObjectives, expUpdate, toggleExpUpdate, finish } = useContext(CreatureContext);\n  const { user, userDispatch } = useContext(UserContext);\n\n  const [levelUpdate, setLevelUpdate] = useState(false);\n  const [evolve, setEvolve] = useState(false);\n\n  const pokeball = (!creature.pokeball_number) ? 13\n    : (creature.pokeball_number < 14) ? 13 // pokeball\n    : (creature.pokeball_number === 14) ? 1 // greatball\n    : (creature.pokeball_number === 15) ? 0 : 11; // ultraball : masterball\n\n  const img = require(`../../images/pokeballs/${pokeball}.png`);\n\n  const toggleLevelUpdate = () => {\n    setLevelUpdate(!levelUpdate);\n  }\n\n  const toggleEvolve = () => {\n    setEvolve(!evolve);\n  }\n\n  /// STREAK METHODS ///\n\n  const updateCreatureStreak = () => {\n    const newCount = creature.streak_count + 1;\n    const newTimestamp = Date.now();\n    const newDay = (new Date()).getDay();\n\n    userDispatch({ type: 'UPDATE_STREAK', creature: {\n      id: creature.id,\n      newCount,\n      newTimestamp,\n      newDay,\n    }});\n\n    finish('creature', creature, 'stats');\n\n    return creature;\n  }\n\n  const resetCreatureStreak = () => {\n    const newCount = 0;\n    const newTimestamp = Date.now();\n    const newDay = (new Date()).getDay();\n\n    userDispatch({ type: 'UPDATE_STREAK', creature: {\n      id: creature.id,\n      newCount,\n      newTimestamp,\n      newDay,\n    }});\n\n    finish('creature', creature, 'stats');\n    \n    return creature;\n  }\n\n  /// AUTO-UPDATE HOOKS ///\n\n  // Updates age, streak, exp, and level\n  useEffect(() => { \n    /* const birthTime = creature.birth_time;\n    const newAge = age.getAge(birthTime);\n\n    console.log(creature.is_noob);\n\n    userDispatch({ type: 'UPDATE_AGE', creature: { newAge, id: creature.id } });\n\n    finish('creature', creature, 'stats'); */\n\n    /* const streak = checkCreatureStreak();\n    if (streak === 'broken') resetCreatureStreak(); */\n\n    if (!expUpdate) return;\n    \n    // if (streak === 'increment' || creature.streak_count === 0) updateCreatureStreak();\n\n    if (creature.exp >= creature.exp_goal || creature.is_noob) {\n      levelUpSound.currentTime = 1;\n        levelUpSound.play();\n        \n      const newLevel = creature.level + 1;\n\n      userDispatch({ type: 'LEVEL_UP', creature: { id: creature.id, level: newLevel }});\n\n      finish('creature', creature, 'stats');\n\n      return toggleLevelUpdate();\n    }\n\n     toggleExpUpdate();\n  }, [creature.exp]);\n\n  // Updates creature multipliers\n  useEffect(() => {\n    if (!levelUpdate) return;\n\n    const timer = setTimeout(() => {\n      const difficulty = stats.getCreatureDifficulty(creature.purpose, creature.level);\n      const multiplier = stats.getExpMultiplier(creature.level);\n\n      userDispatch({ type: 'UPGRADE_MULTIPLIERS', creature: { id: creature.id, difficulty, multiplier }});\n\n      finish('creature', creature, 'stats');\n\n      const prevGoal = (creature.is_noob) ? 1 : creature.exp_goal;\n      const newGoal = (creature.is_noob) ? 9 : stats.getExpGoal(creature.level, difficulty);\n\n      userDispatch({ type: 'LEVEL_UPDATES', creature: {\n        id: creature.id,\n        prevGoal,\n        newGoal,\n      }});\n\n      finish('creature', creature, 'stats');\n\n      toggleExpUpdate();\n      toggleLevelUpdate();\n\n      if (creature.level === 15 || creature.level === 30 || creature.level === 50 || creature.level == 80) {\n        const newPokeball = (creature.level === 30) ? 14\n          : (creature.level === 50) ? 15 \n          : (creature.level === 80) ? 16 \n          : creature.pokeball_number;\n\n        userDispatch({ type: 'UPDATE_POKEBALL', creature: {\n          id: creature.id,\n          newPokeball\n        }});\n\n        finish('creature', creature, 'stats');\n\n        return toggleEvolve();\n      }\n    }, 100);\n\n    return () => clearTimeout(timer);\n  }, [levelUpdate]);\n\n  // Evolves creature\n  useEffect(() => {\n    if (!evolve) return;\n    \n    const nextCreatureIndex = creature.evolutions.findIndex(being => being === creature.creature) + 1;\n    if (!creature.evolutions[nextCreatureIndex]) return toggleEvolve();\n\n    if (creature.evolutions[nextCreatureIndex] === 'none') {\n      let newEvoLine = creature.evolutions;\n        newEvoLine.splice(nextCreatureIndex, 1);\n      console.log('newEvoLine', newEvoLine);\n\n      return toggleEvolve();\n    }\n\n    setTimeout(() => {\n      evolveSound.play();\n\n      const nextCreature = creature.evolutions[nextCreatureIndex];\n\n      userDispatch({ type: 'EVOLVE', creature: {\n        id: creature.id,\n        nextCreature\n      }});\n\n      finish('creature', creature, 'stats');\n\n      return toggleEvolve();\n    }, 800);\n  }, [evolve]);\n\n  // Sends creature id to context and allows for\n  // The selected creature's objectives to be shown\n  const displayCreatureObjectives = () => {\n    showCreatureObjectives(creature.id);\n  }\n\n  return (\n    <div className=\"creature\" style={{\n      backgroundImage: `linear-gradient(rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.6)), url(${img})`,\n      backgroundRepeat: 'no-repeat',\n      backgroundSize: 'cover',\n      backgroundPosition: 'center',\n    }}>\n      <CreatureDisplay \n        creature={creature}\n        displayObjectives={displayObjectives}\n        displayCreatureObjectives={displayCreatureObjectives}\n      />\n    </div>\n  )\n}\n\nexport default Creature;\n"]},"metadata":{},"sourceType":"module"}