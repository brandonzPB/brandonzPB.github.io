{"ast":null,"code":"import React,{useContext}from'react';import{Link,Redirect,Route}from'react-router-dom';import{CreatureContext}from'../../contexts/CreatureContext';import{ConfirmDisplayContext}from'../../contexts/ConfirmDisplayContext';import{UserContext}from'../../contexts/UserContext';import Objective from'./Objective';import ObjectiveForm from'./ObjectiveForm';import ConfirmDisplay from'../ConfirmDisplay';import Creature from'../creature/Creature';import*as ageMethods from'../../modules/age';var ActionList=function ActionList(){var _useContext=useContext(CreatureContext),currentId=_useContext.currentId,showCreatureObjectives=_useContext.showCreatureObjectives,postDelete=_useContext.postDelete,finish=_useContext.finish;var _useContext2=useContext(ConfirmDisplayContext),confirmDisplay=_useContext2.confirmDisplay,toggleConfirmDisplay=_useContext2.toggleConfirmDisplay;var _useContext3=useContext(UserContext),user=_useContext3.user,userDispatch=_useContext3.userDispatch;var creatureInfo;var ObjectiveComponents;var CreatureComponent;var birthdate;var age;var creatureName;var sendDeleteObj=function sendDeleteObj(objectiveId){userDispatch({type:'DELETE_OBJECTIVE',creatureId:currentId,objectiveId:objectiveId});finish('objective');};if(!user.accessToken){return/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/creature/info\"},/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}));}if(currentId){creatureInfo=user.creatures.find(function(being){return being.id===currentId;});ObjectiveComponents=creatureInfo.objectives.length>=1?creatureInfo.objectives.sort(function(a,b){return a.factor-b.factor;}):[];ObjectiveComponents=ObjectiveComponents.map(function(objective){return/*#__PURE__*/React.createElement(Objective,{key:objective.id,objective:objective,creature:creatureInfo,sendDeleteObj:sendDeleteObj});});if(creatureInfo.objectives.length<1)ObjectiveComponents=null;CreatureComponent=user.creatures.map(function(creature){if(creature.id===currentId){return/*#__PURE__*/React.createElement(Creature,{key:creature.id,creature:creature});}return null;});birthdate=creatureInfo.birth_date.length?ageMethods.convertBirthdate(creatureInfo.birth_date):creatureInfo.birth_date;age=creatureInfo.age;creatureName=creatureInfo.creature_name;}var sendDelete=function sendDelete(){console.log('Deleting creature...',currentId);var creatureId=currentId;postDelete(creatureId);showCreatureObjectives('');};if(currentId){return/*#__PURE__*/React.createElement(\"div\",{className:\"update-container\"},/*#__PURE__*/React.createElement(Link,{to:\"/creatures\"},/*#__PURE__*/React.createElement(\"p\",{className:\"creatures-return-link-obj\"},\"Return to Creatures\")),/*#__PURE__*/React.createElement(\"div\",{className:\"adjacent-creature-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"adjacent-creature-container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"adjacent-creature-display\"},CreatureComponent),/*#__PURE__*/React.createElement(\"div\",{className:\"adjacent-creature-age\"},\"Date of creation: \",birthdate,/*#__PURE__*/React.createElement(\"br\",null),\"Age: \",age),/*#__PURE__*/React.createElement(\"div\",{className:\"kill-btn-container\"},/*#__PURE__*/React.createElement(\"button\",{className:\"kill-btn\",onClick:toggleConfirmDisplay,style:{background:confirmDisplay.confirmIsDisplayed?'rgb(108,117,125)':'rgb(220,53,69)'}},confirmDisplay.confirmIsDisplayed?'Cancel':'Delete Creature'),/*#__PURE__*/React.createElement(\"div\",{className:\"confirm-delete-modal\",style:{display:confirmDisplay.confirmIsDisplayed?'flex':'none'}},/*#__PURE__*/React.createElement(ConfirmDisplay,{sendDelete:sendDelete}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"objectives-container\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"obj-list-title\"},creatureName,\"'s Habits\"),/*#__PURE__*/React.createElement(\"span\",{className:\"swipe-text\"},\"Swipe left/right to see full habit\"),/*#__PURE__*/React.createElement(\"div\",{className:\"obj-list-container\"},!ObjectiveComponents?/*#__PURE__*/React.createElement(\"h2\",{className:\"no-obj-text\"},\"Add some Habits for your Creature!\"):/*#__PURE__*/React.createElement(\"ul\",{className:\"objectives-list\"},ObjectiveComponents))),/*#__PURE__*/React.createElement(\"div\",{className:\"objective-form-container\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"add-obj-title\"},\"Add a New Habit\"),/*#__PURE__*/React.createElement(ObjectiveForm,{creatureId:creatureInfo.id})));}return/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/creature/info\"},/*#__PURE__*/React.createElement(Redirect,{to:\"/creatures\"}));};export default ActionList;","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/components/objective/ObjectiveList.js"],"names":["React","useContext","Link","Redirect","Route","CreatureContext","ConfirmDisplayContext","UserContext","Objective","ObjectiveForm","ConfirmDisplay","Creature","ageMethods","ActionList","currentId","showCreatureObjectives","postDelete","finish","confirmDisplay","toggleConfirmDisplay","user","userDispatch","creatureInfo","ObjectiveComponents","CreatureComponent","birthdate","age","creatureName","sendDeleteObj","objectiveId","type","creatureId","accessToken","creatures","find","being","id","objectives","length","sort","a","b","factor","map","objective","creature","birth_date","convertBirthdate","creature_name","sendDelete","console","log","background","confirmIsDisplayed","display"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport { Link, Redirect, Route } from 'react-router-dom';\nimport { CreatureContext } from '../../contexts/CreatureContext';\nimport { ConfirmDisplayContext } from '../../contexts/ConfirmDisplayContext';\nimport { UserContext } from '../../contexts/UserContext';\nimport Objective from './Objective';\nimport ObjectiveForm from './ObjectiveForm';\nimport ConfirmDisplay from '../ConfirmDisplay';\nimport Creature from '../creature/Creature';\nimport * as ageMethods from '../../modules/age';\n\nconst ActionList = () => {\n  const { currentId, showCreatureObjectives, postDelete, finish } = useContext(CreatureContext);\n  const { confirmDisplay, toggleConfirmDisplay } = useContext(ConfirmDisplayContext);\n  const { user, userDispatch } = useContext(UserContext);\n\n  let creatureInfo;\n  let ObjectiveComponents;\n  let CreatureComponent;\n  let birthdate;\n  let age;\n  let creatureName;\n\n  const sendDeleteObj = (objectiveId) => {\n    userDispatch({ type: 'DELETE_OBJECTIVE', \n      creatureId: currentId,\n      objectiveId\n    });\n   \n    finish('objective');\n  }\n\n  if (!user.accessToken) {\n    return (\n      <Route exact path=\"/creature/info\">\n        <Redirect to=\"/\" />\n      </Route>\n    )\n  }\n\n  if (currentId) {\n    creatureInfo = user.creatures.find(being => being.id === currentId);\n\n    ObjectiveComponents = creatureInfo.objectives.length >= 1\n      ? creatureInfo.objectives.sort((a, b) => a.factor - b.factor)\n      : [];\n\n    ObjectiveComponents = ObjectiveComponents.map(objective => {\n      return (\n        <Objective \n          key={objective.id}\n          objective={objective}\n          creature={creatureInfo}\n          sendDeleteObj={sendDeleteObj}\n        />\n      )\n    });\n\n    if (creatureInfo.objectives.length < 1) ObjectiveComponents = null;\n\n    CreatureComponent = user.creatures.map(creature => {\n      if (creature.id === currentId) {\n        return (\n          <Creature \n            key={creature.id}\n            creature={creature}\n          />\n        )\n      }\n      return null;\n    });\n\n    birthdate = creatureInfo.birth_date.length ? ageMethods.convertBirthdate(creatureInfo.birth_date) : creatureInfo.birth_date;\n    age = creatureInfo.age;\n    creatureName = creatureInfo.creature_name;\n  }\n\n  const sendDelete = () => {\n    console.log('Deleting creature...', currentId);\n\n    const creatureId = currentId;\n\n    postDelete(creatureId);\n\n    showCreatureObjectives('');\n  }\n\n  if (currentId) {\n    return (\n      <div className=\"update-container\">\n        <Link to=\"/creatures\">\n          <p className=\"creatures-return-link-obj\">Return to Creatures</p>\n        </Link>\n\n        <div className=\"adjacent-creature-container\">\n          <div className=\"adjacent-creature-container-fluid\">\n            <div className=\"adjacent-creature-display\">\n              {CreatureComponent}\n            </div>\n\n            <div className=\"adjacent-creature-age\">\n              Date of creation: {birthdate}\n              <br />\n              Age: {age}\n            </div>\n\n            <div className=\"kill-btn-container\">\n              <button className=\"kill-btn\" onClick={toggleConfirmDisplay} style={{\n                background: confirmDisplay.confirmIsDisplayed ? 'rgb(108,117,125)' : 'rgb(220,53,69)'\n              }}>\n                {\n                  confirmDisplay.confirmIsDisplayed ? 'Cancel' : 'Delete Creature'\n                }\n              </button>\n\n              <div className=\"confirm-delete-modal\" style={{\n                display: confirmDisplay.confirmIsDisplayed ? 'flex' : 'none'\n              }}>\n                <ConfirmDisplay \n                  sendDelete={sendDelete}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"objectives-container\">\n          <h3 className=\"obj-list-title\">{creatureName}'s Habits</h3>\n          <span className=\"swipe-text\">Swipe left/right to see full habit</span>\n          <div className=\"obj-list-container\">\n            {\n              !ObjectiveComponents\n                ? <h2 className=\"no-obj-text\">Add some Habits for your Creature!</h2>\n                : <ul className=\"objectives-list\">\n                    {ObjectiveComponents}\n                  </ul>\n            }\n          </div>\n        </div>\n        \n        <div className=\"objective-form-container\">\n          <h3 className=\"add-obj-title\">Add a New Habit</h3>\n          <ObjectiveForm creatureId={creatureInfo.id}/>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <Route exact path=\"/creature/info\">\n      <Redirect to=\"/creatures\" />\n    </Route>\n  )\n}\n\nexport default ActionList;\n"]},"metadata":{},"sourceType":"module"}