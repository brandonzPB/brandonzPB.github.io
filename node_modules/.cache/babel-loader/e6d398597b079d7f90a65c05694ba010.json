{"ast":null,"code":"import _regeneratorRuntime from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{Link}from'react-router-dom';import{UserContext}from'../../contexts/UserContext';import userService from'../../services/userService';import'./user.css';var LoginForm=function LoginForm(){var _useContext=useContext(UserContext),getUserInfo=_useContext.getUserInfo;var _useState=useState({username:'',email:'',password:''}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState({ref:''}),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},name,value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var loginResult;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setError(_objectSpread(_objectSpread({},error),{},{ref:''}));if(!user.username.trim()){_context.next=9;break;}_context.next=5;return userService.login('username',user);case 5:loginResult=_context.sent;console.log('loginResult',loginResult);_context.next=22;break;case 9:if(!user.email.trim()){_context.next=16;break;}_context.next=12;return userService.login('email',user);case 12:loginResult=_context.sent;console.log('loginResult',loginResult);_context.next=22;break;case 16:if(user.username.trim()){_context.next=20;break;}return _context.abrupt(\"return\",setError(_objectSpread(_objectSpread({},error),{},{ref:'username'})));case 20:if(user.email.trim()){_context.next=22;break;}return _context.abrupt(\"return\",setError(_objectSpread(_objectSpread({},error),{},{ref:'email'})));case 22:if(!(loginResult.result==='Success')){_context.next=28;break;}localStorage.removeItem('my-reset');localStorage.removeItem('my-user');getUserInfo(loginResult,user.password);_context.next=38;break;case 28:if(!(loginResult.result==='Username error')){_context.next=32;break;}return _context.abrupt(\"return\",setError(_objectSpread(_objectSpread({},error),{},{ref:'username'})));case 32:if(!(loginResult.result==='Email error')){_context.next=36;break;}return _context.abrupt(\"return\",setError(_objectSpread(_objectSpread({},error),{},{ref:'email'})));case 36:if(!(loginResult.result==='Password error')){_context.next=38;break;}return _context.abrupt(\"return\",setError(_objectSpread(_objectSpread({},error),{},{ref:'password'})));case 38:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"login-form-container\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"span\",{className:\"login-title\"},\"Login\"),/*#__PURE__*/React.createElement(\"div\",{className:\"username-login\"},/*#__PURE__*/React.createElement(\"label\",null,\"Username: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"username\",value:user.username,required:!user.email.trim(),onChange:handleChange,style:{border:error.ref==='username'?'2px solid red':'none'}})),/*#__PURE__*/React.createElement(\"div\",{className:\"email-login\"},/*#__PURE__*/React.createElement(\"label\",null,\"or Email: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"email\",value:user.email,required:!user.username.trim(),onChange:handleChange,style:{border:error.ref==='email'?'2px solid red':'none'}})),/*#__PURE__*/React.createElement(\"div\",{className:\"password-login\"},/*#__PURE__*/React.createElement(\"label\",null,\"Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",value:user.password,required:true,onChange:handleChange,style:{border:error.ref==='password'?'2px solid red':'none'}})),/*#__PURE__*/React.createElement(Link,{to:\"/user/reset/forgot\"},/*#__PURE__*/React.createElement(\"p\",{className:\"forgot-password-link\"},\"Forgot Password?\")),/*#__PURE__*/React.createElement(\"button\",{className:\"login-btn\"},\"Login\")));};export default LoginForm;","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/components/user/LoginForm.js"],"names":["React","useState","useContext","Link","UserContext","userService","LoginForm","getUserInfo","username","email","password","user","setUser","ref","error","setError","handleChange","event","target","name","value","handleSubmit","preventDefault","trim","login","loginResult","console","log","result","localStorage","removeItem","border"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { UserContext } from '../../contexts/UserContext';\nimport userService from '../../services/userService';\nimport './user.css';\n\nconst LoginForm = () => {\n  const { getUserInfo } = useContext(UserContext);\n\n  const [user, setUser] = useState({\n    username: '',\n    email: '',\n    password: ''\n  });\n\n  const [error, setError] = useState({ ref: '' });\n\n  const handleChange = event => {\n    const { name, value } = event.target;\n\n    setUser({\n      ...user,\n      [name]: value\n    });\n  }\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    setError({\n      ...error,\n      ref: ''\n    });\n\n    let loginResult;\n\n    if (user.username.trim()) {\n      loginResult = await userService.login('username', user);\n      console.log('loginResult', loginResult);\n    } else if (user.email.trim()) {\n      loginResult = await userService.login('email', user);\n      console.log('loginResult', loginResult);\n    } else if (!user.username.trim()) {\n      return setError({\n        ...error,\n        ref: 'username'\n      });\n    } else if (!user.email.trim()) {\n      return setError({\n        ...error,\n        ref: 'email'\n      });\n    }\n\n    if (loginResult.result === 'Success') {\n      localStorage.removeItem('my-reset');\n      localStorage.removeItem('my-user');\n\n      getUserInfo(loginResult, user.password);\n    } else if (loginResult.result === 'Username error') {\n      return setError({\n        ...error,\n        ref: 'username'\n      });\n    } else if (loginResult.result === 'Email error') {\n      return setError({\n        ...error,\n        ref: 'email'\n      });\n    } else if (loginResult.result === 'Password error') {\n      return setError({\n        ...error,\n        ref: 'password'\n      });\n    }\n  }\n\n  return (\n    <div className=\"login-form-container\">\n      <form onSubmit={handleSubmit}>\n        <span className=\"login-title\">Login</span>\n        <div className=\"username-login\">\n          <label>Username: </label>\n          <input \n            type=\"text\"\n            name=\"username\"\n            value={user.username}\n            required={!user.email.trim()}\n            onChange={handleChange}\n            style={{\n              border: error.ref === 'username' ? '2px solid red' : 'none'\n            }}\n          />\n        </div>\n\n        <div className=\"email-login\">\n          <label>or Email: </label>\n          <input \n            type=\"text\"\n            name=\"email\"\n            value={user.email}\n            required={!user.username.trim()}\n            onChange={handleChange}\n            style={{\n              border: error.ref === 'email' ? '2px solid red' : 'none'\n            }}\n          />\n        </div>\n\n        <div className=\"password-login\">\n          <label>Password: </label>\n          <input \n            type=\"password\"\n            name=\"password\"\n            value={user.password}\n            required={true}\n            onChange={handleChange}\n            style={{\n              border: error.ref === 'password' ? '2px solid red' : 'none'\n            }}\n          />\n        </div>\n\n        <Link to=\"/user/reset/forgot\">\n          <p className=\"forgot-password-link\">Forgot Password?</p>\n        </Link>\n\n        <button className=\"login-btn\">Login</button>\n      </form>\n    </div>\n  )\n}\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}