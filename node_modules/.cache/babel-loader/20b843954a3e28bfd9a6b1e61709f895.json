{"ast":null,"code":"import _slicedToArray from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import{CreatureContext}from'../../contexts/CreatureContext';import*as stats from'../../modules/stats';import CreatureDisplay from'./CreatureDisplay';import'./creature.css';import*as age from'../../modules/age';var lvlUpMusicSrc=require('../../sounds/level-up.mp3');var levelUpSound=new Audio(lvlUpMusicSrc);var evolveMusicSrc=require('../../sounds/evolve.mp3');var evolveSound=new Audio(evolveMusicSrc);var Creature=function Creature(_ref){var creature=_ref.creature;var _useContext=useContext(CreatureContext),displayObjectives=_useContext.displayObjectives,sendCreatureId=_useContext.sendCreatureId,expUpdate=_useContext.expUpdate,toggleExpUpdate=_useContext.toggleExpUpdate,dispatch=_useContext.dispatch;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),levelUpdate=_useState2[0],setLevelUpdate=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),evolve=_useState4[0],setEvolve=_useState4[1];var pokeball=!creature.pokeballNumber?13:creature.pokeballNumber<14?13// pokeball\n:creature.pokeballNumber===14?1// greatball\n:creature.pokeballNumber===15?0:11;// ultraball : masterball\nvar img=require(\"../../images/pokeballs/\".concat(pokeball,\".png\"));var toggleLevelUpdate=function toggleLevelUpdate(){setLevelUpdate(!levelUpdate);};var toggleEvolve=function toggleEvolve(){setEvolve(!evolve);};/// STREAK METHODS ///\nvar checkCreatureStreak=function checkCreatureStreak(){// checks if streak is broken ('broken', 'constant', or 'increment')\nvar streakTimestamp=creature.streak.timestamp;var thisTimestamp=new Date().getDay();if(streakTimestamp===6){// Streak continues if current week day is 0 and less than 24 hours passed\nif(thisTimestamp!==0&&thisTimestamp!==6){// Streak broken\nreturn'broken';}else if(thisTimestamp===0){// Next week day\n// if more than 1440 minutes passed; streak is over\nvar minDifference=age.getAge(streakTimestamp,false);return minDifference>1440?'broken':'increment';}else{return'constant';}}else{// Streak continues if current week day is streak.timestamp + 1, and if less than 24 hours passed\nif(thisTimestamp===streakTimestamp+1){// if more than 1440 minutes passed; streak is over\nvar _minDifference=age.getAge(streakTimestamp,false);return _minDifference>1440?'broken':'increment';}else if(streakTimestamp===thisTimestamp){return'constant';}else{return'broken';}}};var updateCreatureStreak=function updateCreatureStreak(){var newStreak={count:creature.streak?creature.streak.count+1:1,timestamp:new Date().getDay()};dispatch({type:'UPDATE_STREAK',creature:{id:creature.id,newStreak:newStreak}});return creature;};var resetCreatureStreak=function resetCreatureStreak(){var newStreak=0;dispatch({type:'RESET_STREAK',creature:{id:creature.id,newStreak:newStreak}});return creature;};/// AUTO-UPDATE HOOKS ///\n// Updates age, streak, exp, and level\nuseEffect(function(){var birthTime=creature.birthTime;var newAge=age.getAge(birthTime);dispatch({type:'UPDATE_AGE',creature:{newAge:newAge,id:creature.id}});var streak;if(creature.streak){streak=checkCreatureStreak();if(streak==='broken')resetCreatureStreak();}if(!expUpdate)return;if(streak==='increment')updateCreatureStreak();if(creature.exp>=creature.expGoal||creature.isNoob){levelUpSound.currentTime=1;levelUpSound.play();var newLevel=creature.level+1;dispatch({type:'LEVEL_UP',creature:{id:creature.id,level:newLevel}});return toggleLevelUpdate();}toggleExpUpdate();},[creature.exp]);// Updates creature multipliers\nuseEffect(function(){if(!levelUpdate)return;var timer=setTimeout(function(){var difficulty=stats.getCreatureDifficulty(creature.purpose,creature.level);var multiplier=stats.getExpMultiplier(creature.level);dispatch({type:'UPGRADE_MULTIPLIERS',creature:{id:creature.id,difficulty:difficulty,multiplier:multiplier}});var prevGoal=creature.isNoob?1:creature.expGoal;var newGoal=creature.isNoob?9:stats.getExpGoal(creature.level,difficulty);dispatch({type:'LEVEL_UPDATES',creature:{id:creature.id,prevGoal:prevGoal,newGoal:newGoal}});toggleExpUpdate();toggleLevelUpdate();if(creature.level===15||creature.level===30||creature.level===50||creature.level==80){var newPokeball=creature.level===30?14:creature.level===50?15:creature.level===80?16:creature.pokeballNumber;dispatch({type:'UPDATE_POKEBALL',creature:{id:creature.id,newPokeball:newPokeball}});return toggleEvolve();}},100);return function(){return clearTimeout(timer);};},[levelUpdate]);// Evolves creature\nuseEffect(function(){if(!evolve)return;var nextCreatureIndex=creature.evolutionaryLine.findIndex(function(being){return being===creature.creature;})+1;if(!creature.evolutionaryLine[nextCreatureIndex])return toggleEvolve();if(creature.evolutionaryLine[nextCreatureIndex]==='none'){var newEvoLine=creature.evolutionaryLine;newEvoLine.splice(nextCreatureIndex,1);console.log('newEvoLine',newEvoLine);return toggleEvolve();}setTimeout(function(){evolveSound.play();var nextCreature=creature.evolutionaryLine[nextCreatureIndex];dispatch({type:'EVOLVE',creature:{id:creature.id,nextCreature:nextCreature}});return toggleEvolve();},800);},[evolve]);// Sends creature id to context and allows for\n// The selected creature's objectives to be shown\nvar displayCreatureActions=function displayCreatureActions(){sendCreatureId(creature.id);};return/*#__PURE__*/React.createElement(\"div\",{className:\"creature\",style:{backgroundImage:\"linear-gradient(rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.6)), url(\".concat(img,\")\"),backgroundRepeat:'no-repeat',backgroundSize:'cover',backgroundPosition:'center'}},/*#__PURE__*/React.createElement(CreatureDisplay,{creature:creature,displayObjectives:displayObjectives,displayCreatureActions:displayCreatureActions}));};export default Creature;","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/front/src/components/creature/Creature.js"],"names":["React","useState","useEffect","useContext","CreatureContext","stats","CreatureDisplay","age","lvlUpMusicSrc","require","levelUpSound","Audio","evolveMusicSrc","evolveSound","Creature","creature","displayObjectives","sendCreatureId","expUpdate","toggleExpUpdate","dispatch","levelUpdate","setLevelUpdate","evolve","setEvolve","pokeball","pokeballNumber","img","toggleLevelUpdate","toggleEvolve","checkCreatureStreak","streakTimestamp","streak","timestamp","thisTimestamp","Date","getDay","minDifference","getAge","updateCreatureStreak","newStreak","count","type","id","resetCreatureStreak","birthTime","newAge","exp","expGoal","isNoob","currentTime","play","newLevel","level","timer","setTimeout","difficulty","getCreatureDifficulty","purpose","multiplier","getExpMultiplier","prevGoal","newGoal","getExpGoal","newPokeball","clearTimeout","nextCreatureIndex","evolutionaryLine","findIndex","being","newEvoLine","splice","console","log","nextCreature","displayCreatureActions","backgroundImage","backgroundRepeat","backgroundSize","backgroundPosition"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { CreatureContext } from '../../contexts/CreatureContext';\nimport * as stats from '../../modules/stats';\nimport CreatureDisplay from './CreatureDisplay';\nimport './creature.css';\nimport * as age from '../../modules/age';\n\nconst lvlUpMusicSrc = require('../../sounds/level-up.mp3');\nconst levelUpSound = new Audio(lvlUpMusicSrc);\n\nconst evolveMusicSrc = require('../../sounds/evolve.mp3');\nconst evolveSound = new Audio(evolveMusicSrc);\n\nconst Creature = ({ creature }) => {\n  const { displayObjectives, sendCreatureId, expUpdate, toggleExpUpdate, dispatch } = useContext(CreatureContext);\n\n  const [levelUpdate, setLevelUpdate] = useState(false);\n  const [evolve, setEvolve] = useState(false);\n\n  const pokeball = (!creature.pokeballNumber) ? 13\n    : (creature.pokeballNumber < 14) ? 13 // pokeball\n    : (creature.pokeballNumber === 14) ? 1 // greatball\n    : (creature.pokeballNumber === 15) ? 0 : 11; // ultraball : masterball\n\n  const img = require(`../../images/pokeballs/${pokeball}.png`);\n\n  const toggleLevelUpdate = () => {\n    setLevelUpdate(!levelUpdate);\n  }\n\n  const toggleEvolve = () => {\n    setEvolve(!evolve);\n  }\n\n  /// STREAK METHODS ///\n\n  const checkCreatureStreak = () => {\n    // checks if streak is broken ('broken', 'constant', or 'increment')\n\n    const streakTimestamp = creature.streak.timestamp;\n    const thisTimestamp = (new Date()).getDay();\n\n    if (streakTimestamp === 6) { // Streak continues if current week day is 0 and less than 24 hours passed\n\n      if (thisTimestamp !== 0 && thisTimestamp !== 6) { // Streak broken\n        return 'broken';\n      } else if (thisTimestamp === 0) { // Next week day\n        // if more than 1440 minutes passed; streak is over\n\n        const minDifference = age.getAge(streakTimestamp, false);\n        return minDifference > 1440 ? 'broken' : 'increment';\n      } else {\n        return 'constant';\n      }\n\n    } else { // Streak continues if current week day is streak.timestamp + 1, and if less than 24 hours passed\n      \n      if (thisTimestamp === streakTimestamp + 1) {\n        // if more than 1440 minutes passed; streak is over\n\n        const minDifference = age.getAge(streakTimestamp, false);\n        return minDifference > 1440 ? 'broken' : 'increment';\n      } else if (streakTimestamp === thisTimestamp) {\n        return 'constant';\n      } else {\n        return 'broken';\n      }\n    }\n  }\n\n  const updateCreatureStreak = () => {\n    const newStreak = {\n      count: (creature.streak) ? creature.streak.count + 1 : 1,\n      timestamp: (new Date()).getDay()\n    };\n\n    dispatch({ type: 'UPDATE_STREAK', creature: {\n      id: creature.id,\n      newStreak\n    }});\n\n    return creature;\n  }\n\n  const resetCreatureStreak = () => {\n    const newStreak = 0;\n\n    dispatch({ type: 'RESET_STREAK', creature: {\n      id: creature.id,\n      newStreak\n    }});\n    \n    return creature;\n  }\n\n  /// AUTO-UPDATE HOOKS ///\n\n  // Updates age, streak, exp, and level\n  useEffect(() => { \n    const birthTime = creature.birthTime;\n    const newAge = age.getAge(birthTime);\n\n    dispatch({ type: 'UPDATE_AGE', creature: { newAge, id: creature.id } });\n\n    let streak;\n    if (creature.streak) {\n      streak = checkCreatureStreak();\n      if (streak === 'broken') resetCreatureStreak();\n    }\n\n    if (!expUpdate) return;\n    \n    if (streak === 'increment') updateCreatureStreak();\n\n    if (creature.exp >= creature.expGoal || creature.isNoob) {\n      levelUpSound.currentTime = 1;\n        levelUpSound.play();\n        \n      const newLevel = creature.level + 1;\n\n      dispatch({ type: 'LEVEL_UP', creature: { id: creature.id, level: newLevel }});\n\n      return toggleLevelUpdate();\n    }\n\n    toggleExpUpdate();\n  }, [creature.exp]);\n\n  // Updates creature multipliers\n  useEffect(() => {\n    if (!levelUpdate) return;\n\n    const timer = setTimeout(() => {\n      const difficulty = stats.getCreatureDifficulty(creature.purpose, creature.level);\n      const multiplier = stats.getExpMultiplier(creature.level);\n\n      dispatch({ type: 'UPGRADE_MULTIPLIERS', creature: { id: creature.id, difficulty, multiplier }});\n\n      const prevGoal = (creature.isNoob) ? 1 : creature.expGoal;\n      const newGoal = (creature.isNoob) ? 9 : stats.getExpGoal(creature.level, difficulty);\n\n      dispatch({ type: 'LEVEL_UPDATES', creature: {\n        id: creature.id,\n        prevGoal,\n        newGoal,\n      }});\n\n      toggleExpUpdate();\n      toggleLevelUpdate();\n\n      if (creature.level === 15 || creature.level === 30 || creature.level === 50 || creature.level == 80) {\n        const newPokeball = (creature.level === 30) ? 14\n          : (creature.level === 50) ? 15 \n          : (creature.level === 80) ? 16 \n          : creature.pokeballNumber;\n\n        dispatch({ type: 'UPDATE_POKEBALL', creature: {\n          id: creature.id,\n          newPokeball\n        }});\n\n        return toggleEvolve();\n      }\n    }, 100);\n\n    return () => clearTimeout(timer);\n  }, [levelUpdate]);\n\n  // Evolves creature\n  useEffect(() => {\n    if (!evolve) return;\n    \n    const nextCreatureIndex = creature.evolutionaryLine.findIndex(being => being === creature.creature) + 1;\n    if (!creature.evolutionaryLine[nextCreatureIndex]) return toggleEvolve();\n\n    if (creature.evolutionaryLine[nextCreatureIndex] === 'none') {\n      let newEvoLine = creature.evolutionaryLine;\n        newEvoLine.splice(nextCreatureIndex, 1);\n      console.log('newEvoLine', newEvoLine);\n\n      return toggleEvolve();\n    }\n\n    setTimeout(() => {\n      evolveSound.play();\n\n      const nextCreature = creature.evolutionaryLine[nextCreatureIndex];\n\n      dispatch({\n        type: 'EVOLVE',\n        creature: {\n          id: creature.id,\n          nextCreature\n        }\n      });\n\n      return toggleEvolve();\n    }, 800);\n  }, [evolve]);\n\n  // Sends creature id to context and allows for\n  // The selected creature's objectives to be shown\n  const displayCreatureActions = () => {\n    sendCreatureId(creature.id);\n  }\n\n  return (\n    <div className=\"creature\" style={{\n      backgroundImage: `linear-gradient(rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.6)), url(${img})`,\n      backgroundRepeat: 'no-repeat',\n      backgroundSize: 'cover',\n      backgroundPosition: 'center',\n    }}>\n      <CreatureDisplay \n        creature={creature}\n        displayObjectives={displayObjectives}\n        displayCreatureActions={displayCreatureActions}\n      />\n    </div>\n  )\n}\n\nexport default Creature;\n"]},"metadata":{},"sourceType":"module"}