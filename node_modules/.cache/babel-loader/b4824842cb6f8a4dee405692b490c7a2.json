{"ast":null,"code":"exports.getAge = (currentTime, birthTime, string = true) => {\n  // const currentTime = Date.now();\n  const difference = currentTime - birthTime;\n  const dayDifference = difference / 1000 / 86400;\n  const minutes = dayDifference * 1440;\n  const days = dayDifference % 365;\n  const years = (dayDifference - days) / 365;\n  return string ? `${years} years, and ${Math.round(days)} days old` : minutes;\n};\n\nexports.checkCreatureStreak = (thisDay, creature) => {\n  // checks if streak is broken ('broken', 'constant', or 'increment')\n  const streakTimestamp = creature.streak_timestamp;\n  const streakDay = creature.streak_day;\n  /* const thisDay = (new Date()).getDay(); */\n\n  if (streakDay === 6) {\n    // Streak continues if current week day is 0 and less than 24 hours passed\n    if (thisDay !== 0 && thisDay !== 6) {\n      // Streak broken\n      return 'broken';\n    } else if (thisDay === 0) {\n      // Next week day\n      // if more than 2 days passed; streak is over\n      // else, increment streak count\n      const minDifference = this.getAge(streakTimestamp, false);\n      return minDifference > 2880 ? 'broken' : 'increment';\n    } else {\n      // Same day\n      return 'constant';\n    }\n  } else {\n    // Streak continues if current week day is streak.timestamp + 1, and if less than 24 hours passed\n    if (thisDay === streakDay + 1) {\n      // if more than 2 days passed; streak is over\n      // else, increment streak count\n      const minDifference = this.getAge(streakTimestamp, false);\n      return minDifference > 2880 ? 'broken' : 'increment';\n    } else if (streakDay === thisDay) {\n      // Same day\n      return 'constant';\n    } else {\n      return 'broken';\n    }\n  }\n};\n\nexports.updateCreatureStreak = (creature, user, userDispatch, finish) => {\n  const newCount = creature.streak_count + 1;\n  const newTimestamp = Date.now();\n  /* const newDay = (new Date()).getDay(); */\n\n  const newDay = user.newDay;\n  userDispatch({\n    type: 'UPDATE_STREAK',\n    creature: {\n      id: creature.id,\n      newCount,\n      newTimestamp,\n      newDay\n    }\n  });\n  finish('creature', creature, 'stats');\n  return creature;\n};\n\nexports.resetCreatureStreak = (creature, user, userDispatch, finish) => {\n  const newCount = 0;\n  /* const newTimestamp = Date.now() - 86400000; */\n\n  const newTimestamp = user.newTime - 86400000;\n  const newDay = user.newDay;\n  userDispatch({\n    type: 'UPDATE_STREAK',\n    creature: {\n      id: creature.id,\n      newCount,\n      newTimestamp,\n      newDay\n    }\n  });\n  finish('creature', creature, 'stats');\n  return creature;\n};","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/modules/streak.js"],"names":["exports","getAge","currentTime","birthTime","string","difference","dayDifference","minutes","days","years","Math","round","checkCreatureStreak","thisDay","creature","streakTimestamp","streak_timestamp","streakDay","streak_day","minDifference","updateCreatureStreak","user","userDispatch","finish","newCount","streak_count","newTimestamp","Date","now","newDay","type","id","resetCreatureStreak","newTime"],"mappings":"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","sourcesContent":["exports.getAge = (currentTime, birthTime, string = true) => {\n  // const currentTime = Date.now();\n  const difference = currentTime - birthTime;\n\n  const dayDifference = (difference / 1000) / 86400;\n\n  const minutes = dayDifference * 1440;\n  const days = dayDifference % 365;\n  const years = (dayDifference - days) / 365;\n\n  return string ? `${years} years, and ${Math.round(days)} days old` : minutes;\n}\n\nexports.checkCreatureStreak = (thisDay, creature) => {\n  // checks if streak is broken ('broken', 'constant', or 'increment')\n\n  const streakTimestamp = creature.streak_timestamp;\n  const streakDay = creature.streak_day;\n  /* const thisDay = (new Date()).getDay(); */\n\n  if (streakDay === 6) { // Streak continues if current week day is 0 and less than 24 hours passed\n\n    if (thisDay !== 0 && thisDay !== 6) { // Streak broken\n      return 'broken';\n    } else if (thisDay === 0) { // Next week day\n      // if more than 2 days passed; streak is over\n      // else, increment streak count\n\n      const minDifference = this.getAge(streakTimestamp, false);\n      return minDifference > 2880 ? 'broken' : 'increment';\n    } else { // Same day\n\n      return 'constant';\n    }\n\n  } else { // Streak continues if current week day is streak.timestamp + 1, and if less than 24 hours passed\n    \n    if (thisDay === streakDay + 1) {\n      // if more than 2 days passed; streak is over\n      // else, increment streak count\n\n      const minDifference = this.getAge(streakTimestamp, false);\n      return minDifference > 2880 ? 'broken' : 'increment';\n    } else if (streakDay === thisDay) { // Same day\n\n      return 'constant';\n    } else {\n      return 'broken';\n    }\n  }\n}\n\nexports.updateCreatureStreak = (creature, user, userDispatch, finish) => {\n  const newCount = creature.streak_count + 1;\n  const newTimestamp = Date.now();\n  /* const newDay = (new Date()).getDay(); */\n  const newDay = user.newDay;\n\n  userDispatch({ type: 'UPDATE_STREAK', creature: {\n    id: creature.id,\n    newCount,\n    newTimestamp,\n    newDay,\n  }});\n\n  finish('creature', creature, 'stats');\n\n  return creature;\n}\n\nexports.resetCreatureStreak = (creature, user, userDispatch, finish) => {\n  const newCount = 0;\n  /* const newTimestamp = Date.now() - 86400000; */\n  const newTimestamp = user.newTime - 86400000;\n  const newDay = user.newDay;\n\n  userDispatch({ type: 'UPDATE_STREAK', creature: {\n    id: creature.id,\n    newCount,\n    newTimestamp,\n    newDay,\n  }});\n\n  finish('creature', creature, 'stats');\n  \n  return creature;\n};"]},"metadata":{},"sourceType":"module"}