{"ast":null,"code":"var _jsxFileName = \"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/contexts/CreatureContext.js\";\nimport React, { useState, useReducer, useEffect, createContext } from 'react';\nimport creatureReducer from '../reducers/creatureReducer';\nimport * as objective from '../modules/objective';\nimport * as streakTime from '../modules/age';\nexport const CreatureContext = createContext();\n\nconst CreatureContextProvider = props => {\n  /* const [creatures, dispatch] = useReducer(creatureReducer, [], () => {\n    const storedCreatures = localStorage.getItem('my-creatures');\n    return storedCreatures ? JSON.parse(storedCreatures) : [];\n  }); */\n  const [currentId, setCurrentId] = useState('');\n  const [play, setPlay] = useState(false);\n  const [formDisplay, setFormDisplay] = useState(true);\n  const [expUpdate, setExpUpdate] = useState(false); // Remove this hook once user is able to log in\n  // And creatures are stored to database under account\n\n  /* useEffect(() => {\n    localStorage.setItem('my-creatures', JSON.stringify(creatures));\n  }, [creatures]); */\n\n  const getExp = (creature, habit, time) => {\n    if (creature.isNoob) return getFirstExp(creature);\n    const streakCount = creature.streak ? creature.streak.count : 0;\n    const newExp = objective.calcExp(creature.multiplier, streakCount, habit.difficulty, time);\n    const newTotal = creature.exp + newExp;\n    const newSurplus = newTotal >= creature.expGoal ? newTotal - creature.expGoal : creature.expSurplus + newExp;\n    dispatch({\n      type: 'ADD_EXP',\n      creature: {\n        id: creature.id,\n        newTotal,\n        newSurplus\n      }\n    });\n    return creature;\n  };\n\n  const getFirstExp = creature => {\n    const newTotal = 1;\n    const newSurplus = 0;\n    dispatch({\n      type: 'ADD_EXP',\n      creature: {\n        id: creature.id,\n        newTotal,\n        newSurplus\n      }\n    });\n    return creature;\n  };\n\n  const toggleExpUpdate = () => {\n    setExpUpdate(!expUpdate);\n  };\n\n  const toggleFormDisplay = () => {\n    setFormDisplay(!formDisplay);\n  };\n\n  const sendCreatureId = id => {\n    return setCurrentId(id);\n  };\n\n  const togglePlay = () => {\n    setPlay(!play);\n  };\n\n  const checkObjectiveText = (creatureId, text) => {\n    const creatureInfo = creatures.filter(being => being.id === creatureId);\n    const objectiveIndex = creatureInfo[0].objectives.findIndex(item => item.text.toLowerCase() === text.toLowerCase());\n    return objectiveIndex >= 0 ? true : false;\n  };\n\n  return /*#__PURE__*/React.createElement(CreatureContext.Provider, {\n    value: {\n      creatures,\n      currentId,\n      play,\n      togglePlay,\n      formDisplay,\n      toggleFormDisplay,\n      expUpdate,\n      toggleExpUpdate,\n      dispatch,\n      sendCreatureId,\n      getExp,\n      checkObjectiveText\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport default CreatureContextProvider;","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/contexts/CreatureContext.js"],"names":["React","useState","useReducer","useEffect","createContext","creatureReducer","objective","streakTime","CreatureContext","CreatureContextProvider","props","currentId","setCurrentId","play","setPlay","formDisplay","setFormDisplay","expUpdate","setExpUpdate","getExp","creature","habit","time","isNoob","getFirstExp","streakCount","streak","count","newExp","calcExp","multiplier","difficulty","newTotal","exp","newSurplus","expGoal","expSurplus","dispatch","type","id","toggleExpUpdate","toggleFormDisplay","sendCreatureId","togglePlay","checkObjectiveText","creatureId","text","creatureInfo","creatures","filter","being","objectiveIndex","objectives","findIndex","item","toLowerCase","children"],"mappings":"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","sourcesContent":["import React, { useState, useReducer, useEffect, createContext } from 'react';\nimport creatureReducer from '../reducers/creatureReducer';\nimport * as objective from '../modules/objective'\nimport * as streakTime from '../modules/age';\n\nexport const CreatureContext = createContext();\n\nconst CreatureContextProvider = (props) => {\n  /* const [creatures, dispatch] = useReducer(creatureReducer, [], () => {\n    const storedCreatures = localStorage.getItem('my-creatures');\n    return storedCreatures ? JSON.parse(storedCreatures) : [];\n  }); */\n\n  const [currentId, setCurrentId] = useState('');\n  const [play, setPlay] = useState(false);\n  const [formDisplay, setFormDisplay] = useState(true);\n  const [expUpdate, setExpUpdate] = useState(false);\n\n  // Remove this hook once user is able to log in\n  // And creatures are stored to database under account\n  /* useEffect(() => {\n    localStorage.setItem('my-creatures', JSON.stringify(creatures));\n  }, [creatures]); */\n\n  const getExp = (creature, habit, time) => { \n    if (creature.isNoob) return getFirstExp(creature);\n\n    const streakCount = creature.streak ? creature.streak.count : 0;\n\n    const newExp = objective.calcExp(creature.multiplier, streakCount, habit.difficulty, time);\n    const newTotal = creature.exp + newExp;\n\n    const newSurplus = (newTotal >= creature.expGoal) ? \n      newTotal - creature.expGoal :\n      creature.expSurplus + newExp;\n\n    dispatch({ type: 'ADD_EXP', creature: {\n      id: creature.id,\n      newTotal,\n      newSurplus\n    }});\n\n    return creature;\n  }\n\n  const getFirstExp = creature => {\n    const newTotal = 1;\n    const newSurplus = 0;\n\n    dispatch({ type: 'ADD_EXP', creature: { id: creature.id, newTotal, newSurplus } });\n\n    return creature;\n  }\n\n  const toggleExpUpdate = () => {\n    setExpUpdate(!expUpdate);\n  }\n\n  const toggleFormDisplay = () => {\n    setFormDisplay(!formDisplay);\n  }\n\n  const sendCreatureId = id => {\n    return setCurrentId(id);\n  }\n\n  const togglePlay = () => {\n    setPlay(!play);\n  }\n\n  const checkObjectiveText = (creatureId, text) => {\n    const creatureInfo = creatures.filter(being => being.id === creatureId);\n\n    const objectiveIndex = creatureInfo[0].objectives.findIndex(item => item.text.toLowerCase() === text.toLowerCase());\n    return (objectiveIndex >= 0) ? true : false;\n  }\n\n  return (\n    <CreatureContext.Provider \n      value={{\n        creatures, \n        currentId,\n        play,\n        togglePlay,\n        formDisplay,\n        toggleFormDisplay,\n        expUpdate,\n        toggleExpUpdate,\n        dispatch,\n        sendCreatureId,\n        getExp,\n        checkObjectiveText,\n      }}>\n      {props.children}\n    </CreatureContext.Provider>\n  )\n}\n\nexport default CreatureContextProvider;\n"]},"metadata":{},"sourceType":"module"}