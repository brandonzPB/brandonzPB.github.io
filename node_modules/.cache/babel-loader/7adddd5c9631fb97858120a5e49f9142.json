{"ast":null,"code":"import _slicedToArray from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import{CreatureContext}from'../../contexts/CreatureContext';import*as stats from'../../modules/stats';import CreatureDisplay from'./CreatureDisplay';import'./creature.css';import*as age from'../../modules/age';var lvlUpMusicSrc=require('../../sounds/level-up.mp3');var levelUpSound=new Audio(lvlUpMusicSrc);var evolveMusicSrc=require('../../sounds/evolve.mp3');var evolveSound=new Audio(evolveMusicSrc);var Creature=function Creature(_ref){var creature=_ref.creature;var _useContext=useContext(CreatureContext),displayObjectives=_useContext.displayObjectives,sendCreatureId=_useContext.sendCreatureId,expUpdate=_useContext.expUpdate,toggleExpUpdate=_useContext.toggleExpUpdate,dispatch=_useContext.dispatch;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),levelUpdate=_useState2[0],setLevelUpdate=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),evolve=_useState4[0],setEvolve=_useState4[1];var pokeball=!creature.pokeballNumber?13:creature.pokeballNumber<14?13// pokeball\n:creature.pokeballNumber===14?1// greatball\n:creature.pokeballNumber===15?0:11;// ultraball : masterball\nvar img=require(\"../../images/pokeballs/\".concat(pokeball,\".png\"));var toggleLevelUpdate=function toggleLevelUpdate(){setLevelUpdate(!levelUpdate);};var toggleEvolve=function toggleEvolve(){setEvolve(!evolve);};/// STREAK METHODS ///\nvar checkCreatureStreak=function checkCreatureStreak(){// checks if streak is broken ('broken', 'constant', or 'increment')\nvar streakTimestamp=creature.streak.timestamp;var streakDay=creature.streak.day;var thisDay=new Date().getDay();if(streakDay===6){// Streak continues if current week day is 0 and less than 24 hours passed\nif(thisDay!==0&&thisDay!==6){// Streak broken\nreturn'broken';}else if(thisDay===0){// Next week day\n// if more than 2 days passed; streak is over\n// else, increment streak count\nvar minDifference=age.getAge(streakTimestamp,false);return minDifference>2880?'broken':'increment';}else{// Same day\nreturn'constant';}}else{// Streak continues if current week day is streak.timestamp + 1, and if less than 24 hours passed\nif(thisDay===streakDay+1){// if more than 2 days passed; streak is over\n// else, increment streak count\nvar _minDifference=age.getAge(streakTimestamp,false);return _minDifference>2880?'broken':'increment';}else if(streakDay===thisDay){// Same day\nreturn'constant';}else{return'broken';}}};var updateCreatureStreak=function updateCreatureStreak(){var newStreak={count:creature.streak.count+1,timestamp:Date.now(),day:new Date().getDay()};dispatch({type:'UPDATE_STREAK',creature:{id:creature.id,newStreak:newStreak}});return creature;};var resetCreatureStreak=function resetCreatureStreak(){var newStreak={count:0,timesetamp:Date.now(),day:new Date().getDay()};dispatch({type:'RESET_STREAK',creature:{id:creature.id,newStreak:newStreak}});return creature;};/// AUTO-UPDATE HOOKS ///\n// Updates age, streak, exp, and level\nuseEffect(function(){var birthTime=creature.birthTime;var newAge=age.getAge(birthTime);dispatch({type:'UPDATE_AGE',creature:{newAge:newAge,id:creature.id}});var streak;if(creature.streak){streak=checkCreatureStreak();if(streak==='broken')resetCreatureStreak();}else{resetCreatureStreak();}if(!expUpdate)return;if(streak==='increment'||creature.streak.count===0)updateCreatureStreak();if(creature.exp>=creature.expGoal||creature.isNoob){levelUpSound.currentTime=1;levelUpSound.play();var newLevel=creature.level+1;dispatch({type:'LEVEL_UP',creature:{id:creature.id,level:newLevel}});return toggleLevelUpdate();}toggleExpUpdate();},[creature.exp]);// Updates creature multipliers\nuseEffect(function(){if(!levelUpdate)return;var timer=setTimeout(function(){var difficulty=stats.getCreatureDifficulty(creature.purpose,creature.level);var multiplier=stats.getExpMultiplier(creature.level);dispatch({type:'UPGRADE_MULTIPLIERS',creature:{id:creature.id,difficulty:difficulty,multiplier:multiplier}});var prevGoal=creature.isNoob?1:creature.expGoal;var newGoal=creature.isNoob?9:stats.getExpGoal(creature.level,difficulty);dispatch({type:'LEVEL_UPDATES',creature:{id:creature.id,prevGoal:prevGoal,newGoal:newGoal}});toggleExpUpdate();toggleLevelUpdate();if(creature.level===15||creature.level===30||creature.level===50||creature.level==80){var newPokeball=creature.level===30?14:creature.level===50?15:creature.level===80?16:creature.pokeballNumber;dispatch({type:'UPDATE_POKEBALL',creature:{id:creature.id,newPokeball:newPokeball}});return toggleEvolve();}},100);return function(){return clearTimeout(timer);};},[levelUpdate]);// Evolves creature\nuseEffect(function(){if(!evolve)return;var nextCreatureIndex=creature.evolutionaryLine.findIndex(function(being){return being===creature.creature;})+1;if(!creature.evolutionaryLine[nextCreatureIndex])return toggleEvolve();if(creature.evolutionaryLine[nextCreatureIndex]==='none'){var newEvoLine=creature.evolutionaryLine;newEvoLine.splice(nextCreatureIndex,1);console.log('newEvoLine',newEvoLine);return toggleEvolve();}setTimeout(function(){evolveSound.play();var nextCreature=creature.evolutionaryLine[nextCreatureIndex];dispatch({type:'EVOLVE',creature:{id:creature.id,nextCreature:nextCreature}});return toggleEvolve();},800);},[evolve]);// Sends creature id to context and allows for\n// The selected creature's objectives to be shown\nvar displayCreatureActions=function displayCreatureActions(){sendCreatureId(creature.id);};return/*#__PURE__*/React.createElement(\"div\",{className:\"creature\",style:{backgroundImage:\"linear-gradient(rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.6)), url(\".concat(img,\")\"),backgroundRepeat:'no-repeat',backgroundSize:'cover',backgroundPosition:'center'}},/*#__PURE__*/React.createElement(CreatureDisplay,{creature:creature,displayObjectives:displayObjectives,displayCreatureActions:displayCreatureActions}));};export default Creature;","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/components/creature/Creature.js"],"names":["React","useState","useEffect","useContext","CreatureContext","stats","CreatureDisplay","age","lvlUpMusicSrc","require","levelUpSound","Audio","evolveMusicSrc","evolveSound","Creature","creature","displayObjectives","sendCreatureId","expUpdate","toggleExpUpdate","dispatch","levelUpdate","setLevelUpdate","evolve","setEvolve","pokeball","pokeballNumber","img","toggleLevelUpdate","toggleEvolve","checkCreatureStreak","streakTimestamp","streak","timestamp","streakDay","day","thisDay","Date","getDay","minDifference","getAge","updateCreatureStreak","newStreak","count","now","type","id","resetCreatureStreak","timesetamp","birthTime","newAge","exp","expGoal","isNoob","currentTime","play","newLevel","level","timer","setTimeout","difficulty","getCreatureDifficulty","purpose","multiplier","getExpMultiplier","prevGoal","newGoal","getExpGoal","newPokeball","clearTimeout","nextCreatureIndex","evolutionaryLine","findIndex","being","newEvoLine","splice","console","log","nextCreature","displayCreatureActions","backgroundImage","backgroundRepeat","backgroundSize","backgroundPosition"],"mappings":"uMAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,MAAO,GAAKC,CAAAA,KAAZ,KAAuB,qBAAvB,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,MAAO,gBAAP,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,mBAArB,CAEA,GAAMC,CAAAA,aAAa,CAAGC,OAAO,CAAC,2BAAD,CAA7B,CACA,GAAMC,CAAAA,YAAY,CAAG,GAAIC,CAAAA,KAAJ,CAAUH,aAAV,CAArB,CAEA,GAAMI,CAAAA,cAAc,CAAGH,OAAO,CAAC,yBAAD,CAA9B,CACA,GAAMI,CAAAA,WAAW,CAAG,GAAIF,CAAAA,KAAJ,CAAUC,cAAV,CAApB,CAEA,GAAME,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,iBACmDZ,UAAU,CAACC,eAAD,CAD7D,CACzBY,iBADyB,aACzBA,iBADyB,CACNC,cADM,aACNA,cADM,CACUC,SADV,aACUA,SADV,CACqBC,eADrB,aACqBA,eADrB,CACsCC,QADtC,aACsCA,QADtC,eAGKnB,QAAQ,CAAC,KAAD,CAHb,wCAG1BoB,WAH0B,eAGbC,cAHa,8BAILrB,QAAQ,CAAC,KAAD,CAJH,yCAI1BsB,MAJ0B,eAIlBC,SAJkB,eAMjC,GAAMC,CAAAA,QAAQ,CAAI,CAACV,QAAQ,CAACW,cAAX,CAA6B,EAA7B,CACZX,QAAQ,CAACW,cAAT,CAA0B,EAA3B,CAAiC,EAAG;AAApC,CACCX,QAAQ,CAACW,cAAT,GAA4B,EAA7B,CAAmC,CAAE;AAArC,CACCX,QAAQ,CAACW,cAAT,GAA4B,EAA7B,CAAmC,CAAnC,CAAuC,EAH3C,CAG+C;AAE/C,GAAMC,CAAAA,GAAG,CAAGlB,OAAO,kCAA2BgB,QAA3B,SAAnB,CAEA,GAAMG,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC9BN,cAAc,CAAC,CAACD,WAAF,CAAd,CACD,CAFD,CAIA,GAAMQ,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBL,SAAS,CAAC,CAACD,MAAF,CAAT,CACD,CAFD,CAIA;AAEA,GAAMO,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CAChC;AAEA,GAAMC,CAAAA,eAAe,CAAGhB,QAAQ,CAACiB,MAAT,CAAgBC,SAAxC,CACA,GAAMC,CAAAA,SAAS,CAAGnB,QAAQ,CAACiB,MAAT,CAAgBG,GAAlC,CACA,GAAMC,CAAAA,OAAO,CAAI,GAAIC,CAAAA,IAAJ,EAAD,CAAaC,MAAb,EAAhB,CAEA,GAAIJ,SAAS,GAAK,CAAlB,CAAqB,CAAE;AAErB,GAAIE,OAAO,GAAK,CAAZ,EAAiBA,OAAO,GAAK,CAAjC,CAAoC,CAAE;AACpC,MAAO,QAAP,CACD,CAFD,IAEO,IAAIA,OAAO,GAAK,CAAhB,CAAmB,CAAE;AAC1B;AACA;AAEA,GAAMG,CAAAA,aAAa,CAAGhC,GAAG,CAACiC,MAAJ,CAAWT,eAAX,CAA4B,KAA5B,CAAtB,CACA,MAAOQ,CAAAA,aAAa,CAAG,IAAhB,CAAuB,QAAvB,CAAkC,WAAzC,CACD,CANM,IAMA,CAAE;AAEP,MAAO,UAAP,CACD,CAEF,CAfD,IAeO,CAAE;AAEP,GAAIH,OAAO,GAAKF,SAAS,CAAG,CAA5B,CAA+B,CAC7B;AACA;AAEA,GAAMK,CAAAA,cAAa,CAAGhC,GAAG,CAACiC,MAAJ,CAAWT,eAAX,CAA4B,KAA5B,CAAtB,CACA,MAAOQ,CAAAA,cAAa,CAAG,IAAhB,CAAuB,QAAvB,CAAkC,WAAzC,CACD,CAND,IAMO,IAAIL,SAAS,GAAKE,OAAlB,CAA2B,CAAE;AAElC,MAAO,UAAP,CACD,CAHM,IAGA,CACL,MAAO,QAAP,CACD,CACF,CACF,CArCD,CAuCA,GAAMK,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CACjC,GAAMC,CAAAA,SAAS,CAAG,CAChBC,KAAK,CAAE5B,QAAQ,CAACiB,MAAT,CAAgBW,KAAhB,CAAwB,CADf,CAEhBV,SAAS,CAAEI,IAAI,CAACO,GAAL,EAFK,CAGhBT,GAAG,CAAG,GAAIE,CAAAA,IAAJ,EAAD,CAAaC,MAAb,EAHW,CAAlB,CAMAlB,QAAQ,CAAC,CAAEyB,IAAI,CAAE,eAAR,CAAyB9B,QAAQ,CAAE,CAC1C+B,EAAE,CAAE/B,QAAQ,CAAC+B,EAD6B,CAE1CJ,SAAS,CAATA,SAF0C,CAAnC,CAAD,CAAR,CAKA,MAAO3B,CAAAA,QAAP,CACD,CAbD,CAeA,GAAMgC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CAChC,GAAML,CAAAA,SAAS,CAAG,CAChBC,KAAK,CAAE,CADS,CAEhBK,UAAU,CAAEX,IAAI,CAACO,GAAL,EAFI,CAGhBT,GAAG,CAAG,GAAIE,CAAAA,IAAJ,EAAD,CAAaC,MAAb,EAHW,CAAlB,CAMAlB,QAAQ,CAAC,CAAEyB,IAAI,CAAE,cAAR,CAAwB9B,QAAQ,CAAE,CACzC+B,EAAE,CAAE/B,QAAQ,CAAC+B,EAD4B,CAEzCJ,SAAS,CAATA,SAFyC,CAAlC,CAAD,CAAR,CAKA,MAAO3B,CAAAA,QAAP,CACD,CAbD,CAeA;AAEA;AACAb,SAAS,CAAC,UAAM,CACd,GAAM+C,CAAAA,SAAS,CAAGlC,QAAQ,CAACkC,SAA3B,CACA,GAAMC,CAAAA,MAAM,CAAG3C,GAAG,CAACiC,MAAJ,CAAWS,SAAX,CAAf,CAEA7B,QAAQ,CAAC,CAAEyB,IAAI,CAAE,YAAR,CAAsB9B,QAAQ,CAAE,CAAEmC,MAAM,CAANA,MAAF,CAAUJ,EAAE,CAAE/B,QAAQ,CAAC+B,EAAvB,CAAhC,CAAD,CAAR,CAEA,GAAId,CAAAA,MAAJ,CACA,GAAIjB,QAAQ,CAACiB,MAAb,CAAqB,CACnBA,MAAM,CAAGF,mBAAmB,EAA5B,CACA,GAAIE,MAAM,GAAK,QAAf,CAAyBe,mBAAmB,GAC7C,CAHD,IAGO,CACLA,mBAAmB,GACpB,CAED,GAAI,CAAC7B,SAAL,CAAgB,OAEhB,GAAIc,MAAM,GAAK,WAAX,EAA0BjB,QAAQ,CAACiB,MAAT,CAAgBW,KAAhB,GAA0B,CAAxD,CAA2DF,oBAAoB,GAE/E,GAAI1B,QAAQ,CAACoC,GAAT,EAAgBpC,QAAQ,CAACqC,OAAzB,EAAoCrC,QAAQ,CAACsC,MAAjD,CAAyD,CACvD3C,YAAY,CAAC4C,WAAb,CAA2B,CAA3B,CACE5C,YAAY,CAAC6C,IAAb,GAEF,GAAMC,CAAAA,QAAQ,CAAGzC,QAAQ,CAAC0C,KAAT,CAAiB,CAAlC,CAEArC,QAAQ,CAAC,CAAEyB,IAAI,CAAE,UAAR,CAAoB9B,QAAQ,CAAE,CAAE+B,EAAE,CAAE/B,QAAQ,CAAC+B,EAAf,CAAmBW,KAAK,CAAED,QAA1B,CAA9B,CAAD,CAAR,CAEA,MAAO5B,CAAAA,iBAAiB,EAAxB,CACD,CAEDT,eAAe,GAChB,CA9BQ,CA8BN,CAACJ,QAAQ,CAACoC,GAAV,CA9BM,CAAT,CAgCA;AACAjD,SAAS,CAAC,UAAM,CACd,GAAI,CAACmB,WAAL,CAAkB,OAElB,GAAMqC,CAAAA,KAAK,CAAGC,UAAU,CAAC,UAAM,CAC7B,GAAMC,CAAAA,UAAU,CAAGvD,KAAK,CAACwD,qBAAN,CAA4B9C,QAAQ,CAAC+C,OAArC,CAA8C/C,QAAQ,CAAC0C,KAAvD,CAAnB,CACA,GAAMM,CAAAA,UAAU,CAAG1D,KAAK,CAAC2D,gBAAN,CAAuBjD,QAAQ,CAAC0C,KAAhC,CAAnB,CAEArC,QAAQ,CAAC,CAAEyB,IAAI,CAAE,qBAAR,CAA+B9B,QAAQ,CAAE,CAAE+B,EAAE,CAAE/B,QAAQ,CAAC+B,EAAf,CAAmBc,UAAU,CAAVA,UAAnB,CAA+BG,UAAU,CAAVA,UAA/B,CAAzC,CAAD,CAAR,CAEA,GAAME,CAAAA,QAAQ,CAAIlD,QAAQ,CAACsC,MAAV,CAAoB,CAApB,CAAwBtC,QAAQ,CAACqC,OAAlD,CACA,GAAMc,CAAAA,OAAO,CAAInD,QAAQ,CAACsC,MAAV,CAAoB,CAApB,CAAwBhD,KAAK,CAAC8D,UAAN,CAAiBpD,QAAQ,CAAC0C,KAA1B,CAAiCG,UAAjC,CAAxC,CAEAxC,QAAQ,CAAC,CAAEyB,IAAI,CAAE,eAAR,CAAyB9B,QAAQ,CAAE,CAC1C+B,EAAE,CAAE/B,QAAQ,CAAC+B,EAD6B,CAE1CmB,QAAQ,CAARA,QAF0C,CAG1CC,OAAO,CAAPA,OAH0C,CAAnC,CAAD,CAAR,CAMA/C,eAAe,GACfS,iBAAiB,GAEjB,GAAIb,QAAQ,CAAC0C,KAAT,GAAmB,EAAnB,EAAyB1C,QAAQ,CAAC0C,KAAT,GAAmB,EAA5C,EAAkD1C,QAAQ,CAAC0C,KAAT,GAAmB,EAArE,EAA2E1C,QAAQ,CAAC0C,KAAT,EAAkB,EAAjG,CAAqG,CACnG,GAAMW,CAAAA,WAAW,CAAIrD,QAAQ,CAAC0C,KAAT,GAAmB,EAApB,CAA0B,EAA1B,CACf1C,QAAQ,CAAC0C,KAAT,GAAmB,EAApB,CAA0B,EAA1B,CACC1C,QAAQ,CAAC0C,KAAT,GAAmB,EAApB,CAA0B,EAA1B,CACA1C,QAAQ,CAACW,cAHb,CAKAN,QAAQ,CAAC,CAAEyB,IAAI,CAAE,iBAAR,CAA2B9B,QAAQ,CAAE,CAC5C+B,EAAE,CAAE/B,QAAQ,CAAC+B,EAD+B,CAE5CsB,WAAW,CAAXA,WAF4C,CAArC,CAAD,CAAR,CAKA,MAAOvC,CAAAA,YAAY,EAAnB,CACD,CACF,CA/BuB,CA+BrB,GA/BqB,CAAxB,CAiCA,MAAO,kBAAMwC,CAAAA,YAAY,CAACX,KAAD,CAAlB,EAAP,CACD,CArCQ,CAqCN,CAACrC,WAAD,CArCM,CAAT,CAuCA;AACAnB,SAAS,CAAC,UAAM,CACd,GAAI,CAACqB,MAAL,CAAa,OAEb,GAAM+C,CAAAA,iBAAiB,CAAGvD,QAAQ,CAACwD,gBAAT,CAA0BC,SAA1B,CAAoC,SAAAC,KAAK,QAAIA,CAAAA,KAAK,GAAK1D,QAAQ,CAACA,QAAvB,EAAzC,EAA4E,CAAtG,CACA,GAAI,CAACA,QAAQ,CAACwD,gBAAT,CAA0BD,iBAA1B,CAAL,CAAmD,MAAOzC,CAAAA,YAAY,EAAnB,CAEnD,GAAId,QAAQ,CAACwD,gBAAT,CAA0BD,iBAA1B,IAAiD,MAArD,CAA6D,CAC3D,GAAII,CAAAA,UAAU,CAAG3D,QAAQ,CAACwD,gBAA1B,CACEG,UAAU,CAACC,MAAX,CAAkBL,iBAAlB,CAAqC,CAArC,EACFM,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BH,UAA1B,EAEA,MAAO7C,CAAAA,YAAY,EAAnB,CACD,CAED8B,UAAU,CAAC,UAAM,CACf9C,WAAW,CAAC0C,IAAZ,GAEA,GAAMuB,CAAAA,YAAY,CAAG/D,QAAQ,CAACwD,gBAAT,CAA0BD,iBAA1B,CAArB,CAEAlD,QAAQ,CAAC,CACPyB,IAAI,CAAE,QADC,CAEP9B,QAAQ,CAAE,CACR+B,EAAE,CAAE/B,QAAQ,CAAC+B,EADL,CAERgC,YAAY,CAAZA,YAFQ,CAFH,CAAD,CAAR,CAQA,MAAOjD,CAAAA,YAAY,EAAnB,CACD,CAdS,CAcP,GAdO,CAAV,CAeD,CA7BQ,CA6BN,CAACN,MAAD,CA7BM,CAAT,CA+BA;AACA;AACA,GAAMwD,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,EAAM,CACnC9D,cAAc,CAACF,QAAQ,CAAC+B,EAAV,CAAd,CACD,CAFD,CAIA,mBACE,2BAAK,SAAS,CAAC,UAAf,CAA0B,KAAK,CAAE,CAC/BkC,eAAe,oFAA8ErD,GAA9E,KADgB,CAE/BsD,gBAAgB,CAAE,WAFa,CAG/BC,cAAc,CAAE,OAHe,CAI/BC,kBAAkB,CAAE,QAJW,CAAjC,eAME,oBAAC,eAAD,EACE,QAAQ,CAAEpE,QADZ,CAEE,iBAAiB,CAAEC,iBAFrB,CAGE,sBAAsB,CAAE+D,sBAH1B,EANF,CADF,CAcD,CA3ND,CA6NA,cAAejE,CAAAA,QAAf","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { CreatureContext } from '../../contexts/CreatureContext';\nimport * as stats from '../../modules/stats';\nimport CreatureDisplay from './CreatureDisplay';\nimport './creature.css';\nimport * as age from '../../modules/age';\n\nconst lvlUpMusicSrc = require('../../sounds/level-up.mp3');\nconst levelUpSound = new Audio(lvlUpMusicSrc);\n\nconst evolveMusicSrc = require('../../sounds/evolve.mp3');\nconst evolveSound = new Audio(evolveMusicSrc);\n\nconst Creature = ({ creature }) => {\n  const { displayObjectives, sendCreatureId, expUpdate, toggleExpUpdate, dispatch } = useContext(CreatureContext);\n\n  const [levelUpdate, setLevelUpdate] = useState(false);\n  const [evolve, setEvolve] = useState(false);\n\n  const pokeball = (!creature.pokeballNumber) ? 13\n    : (creature.pokeballNumber < 14) ? 13 // pokeball\n    : (creature.pokeballNumber === 14) ? 1 // greatball\n    : (creature.pokeballNumber === 15) ? 0 : 11; // ultraball : masterball\n\n  const img = require(`../../images/pokeballs/${pokeball}.png`);\n\n  const toggleLevelUpdate = () => {\n    setLevelUpdate(!levelUpdate);\n  }\n\n  const toggleEvolve = () => {\n    setEvolve(!evolve);\n  }\n\n  /// STREAK METHODS ///\n\n  const checkCreatureStreak = () => {\n    // checks if streak is broken ('broken', 'constant', or 'increment')\n\n    const streakTimestamp = creature.streak.timestamp;\n    const streakDay = creature.streak.day;\n    const thisDay = (new Date()).getDay();\n\n    if (streakDay === 6) { // Streak continues if current week day is 0 and less than 24 hours passed\n\n      if (thisDay !== 0 && thisDay !== 6) { // Streak broken\n        return 'broken';\n      } else if (thisDay === 0) { // Next week day\n        // if more than 2 days passed; streak is over\n        // else, increment streak count\n\n        const minDifference = age.getAge(streakTimestamp, false);\n        return minDifference > 2880 ? 'broken' : 'increment';\n      } else { // Same day\n\n        return 'constant';\n      }\n\n    } else { // Streak continues if current week day is streak.timestamp + 1, and if less than 24 hours passed\n      \n      if (thisDay === streakDay + 1) {\n        // if more than 2 days passed; streak is over\n        // else, increment streak count\n\n        const minDifference = age.getAge(streakTimestamp, false);\n        return minDifference > 2880 ? 'broken' : 'increment';\n      } else if (streakDay === thisDay) { // Same day\n\n        return 'constant';\n      } else {\n        return 'broken';\n      }\n    }\n  }\n\n  const updateCreatureStreak = () => {\n    const newStreak = {\n      count: creature.streak.count + 1,\n      timestamp: Date.now(),\n      day: (new Date()).getDay()\n    };\n\n    dispatch({ type: 'UPDATE_STREAK', creature: {\n      id: creature.id,\n      newStreak\n    }});\n\n    return creature;\n  }\n\n  const resetCreatureStreak = () => {\n    const newStreak = {\n      count: 0,\n      timesetamp: Date.now(),\n      day: (new Date()).getDay()\n    };\n\n    dispatch({ type: 'RESET_STREAK', creature: {\n      id: creature.id,\n      newStreak\n    }});\n    \n    return creature;\n  }\n\n  /// AUTO-UPDATE HOOKS ///\n\n  // Updates age, streak, exp, and level\n  useEffect(() => { \n    const birthTime = creature.birthTime;\n    const newAge = age.getAge(birthTime);\n\n    dispatch({ type: 'UPDATE_AGE', creature: { newAge, id: creature.id } });\n\n    let streak;\n    if (creature.streak) {\n      streak = checkCreatureStreak();\n      if (streak === 'broken') resetCreatureStreak();\n    } else {\n      resetCreatureStreak();\n    }\n\n    if (!expUpdate) return;\n    \n    if (streak === 'increment' || creature.streak.count === 0) updateCreatureStreak();\n\n    if (creature.exp >= creature.expGoal || creature.isNoob) {\n      levelUpSound.currentTime = 1;\n        levelUpSound.play();\n        \n      const newLevel = creature.level + 1;\n\n      dispatch({ type: 'LEVEL_UP', creature: { id: creature.id, level: newLevel }});\n\n      return toggleLevelUpdate();\n    }\n\n    toggleExpUpdate();\n  }, [creature.exp]);\n\n  // Updates creature multipliers\n  useEffect(() => {\n    if (!levelUpdate) return;\n\n    const timer = setTimeout(() => {\n      const difficulty = stats.getCreatureDifficulty(creature.purpose, creature.level);\n      const multiplier = stats.getExpMultiplier(creature.level);\n\n      dispatch({ type: 'UPGRADE_MULTIPLIERS', creature: { id: creature.id, difficulty, multiplier }});\n\n      const prevGoal = (creature.isNoob) ? 1 : creature.expGoal;\n      const newGoal = (creature.isNoob) ? 9 : stats.getExpGoal(creature.level, difficulty);\n\n      dispatch({ type: 'LEVEL_UPDATES', creature: {\n        id: creature.id,\n        prevGoal,\n        newGoal,\n      }});\n\n      toggleExpUpdate();\n      toggleLevelUpdate();\n\n      if (creature.level === 15 || creature.level === 30 || creature.level === 50 || creature.level == 80) {\n        const newPokeball = (creature.level === 30) ? 14\n          : (creature.level === 50) ? 15 \n          : (creature.level === 80) ? 16 \n          : creature.pokeballNumber;\n\n        dispatch({ type: 'UPDATE_POKEBALL', creature: {\n          id: creature.id,\n          newPokeball\n        }});\n\n        return toggleEvolve();\n      }\n    }, 100);\n\n    return () => clearTimeout(timer);\n  }, [levelUpdate]);\n\n  // Evolves creature\n  useEffect(() => {\n    if (!evolve) return;\n    \n    const nextCreatureIndex = creature.evolutionaryLine.findIndex(being => being === creature.creature) + 1;\n    if (!creature.evolutionaryLine[nextCreatureIndex]) return toggleEvolve();\n\n    if (creature.evolutionaryLine[nextCreatureIndex] === 'none') {\n      let newEvoLine = creature.evolutionaryLine;\n        newEvoLine.splice(nextCreatureIndex, 1);\n      console.log('newEvoLine', newEvoLine);\n\n      return toggleEvolve();\n    }\n\n    setTimeout(() => {\n      evolveSound.play();\n\n      const nextCreature = creature.evolutionaryLine[nextCreatureIndex];\n\n      dispatch({\n        type: 'EVOLVE',\n        creature: {\n          id: creature.id,\n          nextCreature\n        }\n      });\n\n      return toggleEvolve();\n    }, 800);\n  }, [evolve]);\n\n  // Sends creature id to context and allows for\n  // The selected creature's objectives to be shown\n  const displayCreatureActions = () => {\n    sendCreatureId(creature.id);\n  }\n\n  return (\n    <div className=\"creature\" style={{\n      backgroundImage: `linear-gradient(rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.6)), url(${img})`,\n      backgroundRepeat: 'no-repeat',\n      backgroundSize: 'cover',\n      backgroundPosition: 'center',\n    }}>\n      <CreatureDisplay \n        creature={creature}\n        displayObjectives={displayObjectives}\n        displayCreatureActions={displayCreatureActions}\n      />\n    </div>\n  )\n}\n\nexport default Creature;\n"]},"metadata":{},"sourceType":"module"}