{"ast":null,"code":"import _regeneratorRuntime from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{Route,Redirect}from'react-router-dom';import{UserContext}from'../../contexts/UserContext';import userService from'../../services/userService';import'./user.css';var ResetPassword=function ResetPassword(){var _useContext=useContext(UserContext),reset=_useContext.reset,setReset=_useContext.setReset;var _useState=useState({password:'',confirmPassword:''}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState({upset:false}),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPassword=_useState6[0],setShowPassword=_useState6[1];var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},name,value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var userObject,passwordReset;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setError(_objectSpread(_objectSpread({},error),{},{upset:false}));if(!(form.password.trim()&&form.confirmPassword.trim())){_context.next=14;break;}if(!(form.password===form.confirmPassword)){_context.next=11;break;}userObject={email:reset.email,password:form.password};_context.next=7;return userService.putPasswordReset(userObject,reset.resetToken);case 7:passwordReset=_context.sent;if(passwordReset==='Complete'){setReset(_objectSpread(_objectSpread({},reset),{},{passwordReset:true}));}_context.next=12;break;case 11:return _context.abrupt(\"return\",setError(_objectSpread(_objectSpread({},error),{},{upset:true})));case 12:_context.next=15;break;case 14:return _context.abrupt(\"return\",setError(_objectSpread(_objectSpread({},error),{},{upset:true})));case 15:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var viewPassword=function viewPassword(event){event.preventDefault();return setShowPassword(!showPassword);};var cancelRequest=function cancelRequest(){setReset(_objectSpread(_objectSpread({},reset),{},{resetToken:'',email:'',code:''}));};if(!reset.resetToken||reset.passwordReset){return/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/user/reset/password\"},/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}));}return/*#__PURE__*/React.createElement(\"div\",{className:\"reset-password-container\"},/*#__PURE__*/React.createElement(\"button\",{onClick:cancelRequest,className:\"cancel-reset-btn\"},\"Cancel Reset\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"password-input\"},/*#__PURE__*/React.createElement(\"label\",null,\"New Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:showPassword?'text':'password',name:\"password\",value:form.password,onChange:handleChange}),/*#__PURE__*/React.createElement(\"button\",{className:\"show-password\",onClick:viewPassword},\"\\uD83D\\uDC41\")),/*#__PURE__*/React.createElement(\"div\",{className:\"confirm-password-input\"},/*#__PURE__*/React.createElement(\"label\",null,\"Confirm New Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:showPassword?'text':'password',name:\"confirmPassword\",value:form.confirmPassword,onChange:handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"submit-password-reset\"},/*#__PURE__*/React.createElement(\"button\",{className:\"submit-reset-btn\",onClick:handleSubmit},\"Reset Password\"))));};export default ResetPassword;","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/components/user/ResetPassword.js"],"names":["React","useState","useContext","Route","Redirect","UserContext","userService","ResetPassword","reset","setReset","password","confirmPassword","form","setForm","upset","error","setError","showPassword","setShowPassword","handleChange","event","target","name","value","handleSubmit","preventDefault","trim","userObject","email","putPasswordReset","resetToken","passwordReset","viewPassword","cancelRequest","code"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { UserContext } from '../../contexts/UserContext';\nimport userService from '../../services/userService';\nimport './user.css';\n\nconst ResetPassword = () => {\n  const { reset, setReset } = useContext(UserContext);\n\n  const [form, setForm] = useState({\n    password: '',\n    confirmPassword: ''\n  });\n\n  const [error, setError] = useState({ upset: false });\n\n  const [showPassword, setShowPassword] = useState(false);\n\n  const handleChange = event => {\n    const { name, value } = event.target;\n\n    setForm({\n      ...form,\n      [name]: value\n    });\n  }\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    setError({\n      ...error,\n      upset: false\n    });\n\n    if (form.password.trim() && form.confirmPassword.trim()) {\n      if (form.password === form.confirmPassword) {\n        const userObject = {\n          email: reset.email,\n          password: form.password\n        };\n\n        const passwordReset = await userService.putPasswordReset(userObject, reset.resetToken);\n\n        if (passwordReset === 'Complete') {\n          setReset({\n            ...reset,\n            passwordReset: true\n          });\n        } \n      } else {\n        return setError({\n          ...error,\n          upset: true\n        });\n      }\n    } else {\n      return setError({\n        ...error,\n        upset: true\n      });\n    }\n  }\n  \n  const viewPassword = event => {\n    event.preventDefault();\n\n    return setShowPassword(!showPassword);\n  }\n\n  const cancelRequest = () => {\n    setReset({\n      ...reset,\n      resetToken: '',\n      email: '',\n      code: '',\n    });\n  }\n\n  if (!reset.resetToken || reset.passwordReset) {\n    return (\n      <Route exact path=\"/user/reset/password\">\n        <Redirect to=\"/\" />\n      </Route>\n    )\n  }\n\n  return (\n    <div className=\"reset-password-container\">\n      <button onClick={cancelRequest} className=\"cancel-reset-btn\">Cancel Reset</button>\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"password-input\">\n          <label>New Password: </label>\n          <input \n            type={showPassword ? 'text' : 'password'}\n            name=\"password\"\n            value={form.password}\n            onChange={handleChange}\n          />\n          <button className=\"show-password\" onClick={viewPassword}>&#128065;</button>\n        </div>\n\n        <div className=\"confirm-password-input\">\n          <label>Confirm New Password: </label>\n          <input \n            type={showPassword ? 'text' : 'password'}\n            name=\"confirmPassword\"\n            value={form.confirmPassword}\n            onChange={handleChange}\n          />\n        </div>\n\n        <div className=\"submit-password-reset\">\n          <button className=\"submit-reset-btn\" onClick={handleSubmit}>Reset Password</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default ResetPassword;\n"]},"metadata":{},"sourceType":"module"}