{"ast":null,"code":"import _defineProperty from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{Link,Route,Redirect}from'react-router-dom';import{UserContext}from'../../contexts/UserContext';import{CreatureContext}from'../../contexts/CreatureContext';import CreatureOption from'./CreatureOption';import{otherVersions}from'../../modules/pokemonList';import pokemon from'pokemon';import*as megaMethods from'../../modules/megas';var CreatureUpdateForm=function CreatureUpdateForm(){var _useContext=useContext(UserContext),user=_useContext.user,userDispatch=_useContext.userDispatch;var _useContext2=useContext(CreatureContext),currentId=_useContext2.currentId,showCreatureObjectives=_useContext2.showCreatureObjectives,finish=_useContext2.finish;var creature=user.creatures.filter(function(creature){return creature.id===currentId;});var _useState=useState({firstCreature:'',// This represents the creature's current pokemon\nfirstMega:'',secondCreature:'',secondMega:'',thirdCreature:'',thirdMega:'',fourthCreature:'',fourthMega:'',creatureName:''}),_useState2=_slicedToArray(_useState,2),update=_useState2[0],setUpdate=_useState2[1];if(!user.accessToken||!currentId.trim()){return/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/creature/update\"},/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}));}var pkmnArr=pokemon.all().sort(function(a,b){return a>b?1:a<b?-1:0;});var OptionComponents=pkmnArr.map(function(creature){return/*#__PURE__*/React.createElement(CreatureOption,{key:pokemon.getId(creature),creature:creature});});var handleChange=function handleChange(event){var _event$target=event.target,value=_event$target.value,name=_event$target.name,className=_event$target.className;if(className==='select-creature'){var _objectSpread2;var megaPlace;if(name==='firstCreature'){megaPlace='firstMega';}else if(name==='secondCreature'){megaPlace='secondMega';}else if(name==='thirdCreature'){megaPlace='thirdMega';}else{megaPlace='fourthMega';}setUpdate(_objectSpread(_objectSpread({},update),{},(_objectSpread2={},_defineProperty(_objectSpread2,megaPlace,''),_defineProperty(_objectSpread2,name,value),_objectSpread2)));}else{setUpdate(_objectSpread(_objectSpread({},update),{},_defineProperty({},name,value)));}};var updateCreature=function updateCreature(event){event.preventDefault();// check megas from inputs\nvar megas=megaMethods.getMegas(update);// assign selected versions (if any) to one array\nvar evolutions=megaMethods.putMegas(update,megas).map(function(item){if(!item.trim()){return'none';}return item;});// check if any of the updates match the current values of the actual, unupdated creature\n// true -> return current value\n// false -> return update\nvar current=evolutions[0]===creature[0].creature||evolutions[0]==='none'?creature[0].evolutions[0]:evolutions[0];var second=evolutions[1]===creature[0].evolutions[1]||evolutions[1]==='none'?creature[0].evolutions[1]:evolutions[1];var third=evolutions[2]===creature[0].evolutions[2]||evolutions[2]==='none'?creature[0].evolutions[2]:evolutions[2];var fourth=evolutions[3]===creature[0].evolutions[3]||evolutions[3]==='none'?creature[0].evolutions[3]:evolutions[3];var name=update.creatureName===creature[0].creature_name||update.creatureName===''?creature[0].creature_name:update.creatureName;console.log('evolutions',[current,second,third,fourth]);console.log('creatureName',update.creatureName);var newEvos=[current,second,third,fourth];userDispatch({type:'UPDATE_CREATURE_INFO',creature:{id:creature[0].id,current:current,newEvos:newEvos,name:name}});finish('creature',creature[0],'info');setUpdate(_objectSpread(_objectSpread({},update),{},{firstCreature:'',firstMega:'',secondCreature:'',secondMega:'',thirdCreature:'',thirdMega:'',fourthCreature:'',fourthMega:'',creatureName:''}));showCreatureObjectives(currentId);};return/*#__PURE__*/React.createElement(\"div\",{className:\"creature-info creature-form\"},/*#__PURE__*/React.createElement(Link,{to:\"/creatures\"},/*#__PURE__*/React.createElement(\"p\",{className:\"creatures-return-link-update\"},\"Return to Creatures\")),/*#__PURE__*/React.createElement(\"div\",{className:\"creature-update-form\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:updateCreature},/*#__PURE__*/React.createElement(\"h2\",{className:\"form-title\"},\"Edit Your Creature!\"),/*#__PURE__*/React.createElement(\"div\",{className:\"evo-label\"},/*#__PURE__*/React.createElement(\"label\",{className:\"evo-label-text\"},\"Creature Evolution Line\")),/*#__PURE__*/React.createElement(\"div\",{className:\"label-container\"},/*#__PURE__*/React.createElement(\"label\",{className:\"mega-input-text\"},\"Choose an alternate version\")),/*#__PURE__*/React.createElement(\"div\",{className:\"creature-inputs\"},/*#__PURE__*/React.createElement(\"div\",{className:\"creature-input\"},/*#__PURE__*/React.createElement(\"div\",{className:\"creature-label\"},/*#__PURE__*/React.createElement(\"label\",null,\"Current: \")),/*#__PURE__*/React.createElement(\"div\",{className:\"creature-select\"},/*#__PURE__*/React.createElement(\"select\",{className:\"select-creature\",onChange:handleChange,name:\"firstCreature\",value:update.firstCreature},/*#__PURE__*/React.createElement(\"option\",{defaultValue:true,value:\"\"},creature[0].creature),OptionComponents)),/*#__PURE__*/React.createElement(\"div\",{className:\"mega-input\"},/*#__PURE__*/React.createElement(\"input\",{disabled:otherVersions.findIndex(function(pkmn){return pkmn.name===update.firstCreature.toLowerCase();})<0,type:\"text\",placeholder:\"none/mega/megaX/megaY\",className:\"mega\",name:\"firstMega\",value:update.firstMega,onChange:handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"creature-input\"},/*#__PURE__*/React.createElement(\"div\",{className:\"creature-label\"},/*#__PURE__*/React.createElement(\"label\",null,\"Second: \")),/*#__PURE__*/React.createElement(\"div\",{className:\"creature-select\"},/*#__PURE__*/React.createElement(\"select\",{className:\"select-creature\",onChange:handleChange,name:\"secondCreature\",value:update.secondCreature,disabled:creature[0].level>=15},/*#__PURE__*/React.createElement(\"option\",{defaultValue:true,value:\"\"},creature[0].level>=15?'Past evolution':creature[0].evolutions[1]),OptionComponents)),/*#__PURE__*/React.createElement(\"div\",{className:\"mega-input\"},/*#__PURE__*/React.createElement(\"input\",{disabled:otherVersions.findIndex(function(pkmn){return pkmn.name===update.secondCreature.toLowerCase();})<0,type:\"text\",placeholder:\"none/mega/megaX/megaY\",className:\"mega\",name:\"secondMega\",value:update.secondMega,onChange:handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"creature-input\"},/*#__PURE__*/React.createElement(\"div\",{className:\"creature-label\"},/*#__PURE__*/React.createElement(\"label\",null,\"Third: \")),/*#__PURE__*/React.createElement(\"div\",{className:\"creature-select\"},/*#__PURE__*/React.createElement(\"select\",{className:\"select-creature\",onChange:handleChange,name:\"thirdCreature\",value:update.thirdCreature,disabled:creature[0].level>=30},/*#__PURE__*/React.createElement(\"option\",{defaultValue:true,value:\"\"},creature[0].level>=30?'Past evolution':creature[0].evolutions[2]),OptionComponents)),/*#__PURE__*/React.createElement(\"div\",{className:\"mega-input\"},/*#__PURE__*/React.createElement(\"input\",{disabled:otherVersions.findIndex(function(pkmn){return pkmn.name===update.thirdCreature.toLowerCase();})<0,type:\"text\",placeholder:\"none/mega/megaX/megaY\",className:\"mega\",name:\"thirdMega\",value:update.thirdMega,onChange:handleChange}))),/*#__PURE__*/React.createElement(\"div\",{className:\"creature-input\"},/*#__PURE__*/React.createElement(\"div\",{className:\"creature-label\"},/*#__PURE__*/React.createElement(\"label\",null,\"Fourth: \")),/*#__PURE__*/React.createElement(\"div\",{className:\"creature-select\"},/*#__PURE__*/React.createElement(\"select\",{className:\"select-creature\",onChange:handleChange,name:\"fourthCreature\",value:update.fourthCreature,disabled:creature[0].level>=50},/*#__PURE__*/React.createElement(\"option\",{defaultValue:true,value:\"\"},creature[0].level>=50?'Past evolution':creature[0].evolutions[3]),OptionComponents)),/*#__PURE__*/React.createElement(\"div\",{className:\"mega-input\"},/*#__PURE__*/React.createElement(\"input\",{disabled:otherVersions.findIndex(function(pkmn){return pkmn.name===update.fourthCreature.toLowerCase();})<0,type:\"text\",placeholder:\"none/mega/megaX/megaY\",className:\"mega\",name:\"fourthMega\",value:update.fourthMega,onChange:handleChange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"name-label\"},/*#__PURE__*/React.createElement(\"label\",null,\"Would you like to rename \",creature[0].creature_name,\"?\")),/*#__PURE__*/React.createElement(\"div\",{className:\"name-input\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Socrates\",name:\"creatureName\",value:update.creatureName,onChange:handleChange})),/*#__PURE__*/React.createElement(\"button\",{className:\"submit-form-btn\"},\"Update Creature\"))));};export default CreatureUpdateForm;","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/components/creature/CreatureUpdateForm.js"],"names":["React","useState","useContext","Link","Route","Redirect","UserContext","CreatureContext","CreatureOption","otherVersions","pokemon","megaMethods","CreatureUpdateForm","user","userDispatch","currentId","showCreatureObjectives","finish","creature","creatures","filter","id","firstCreature","firstMega","secondCreature","secondMega","thirdCreature","thirdMega","fourthCreature","fourthMega","creatureName","update","setUpdate","accessToken","trim","pkmnArr","all","sort","a","b","OptionComponents","map","getId","handleChange","event","target","value","name","className","megaPlace","updateCreature","preventDefault","megas","getMegas","evolutions","putMegas","item","current","second","third","fourth","creature_name","console","log","newEvos","type","findIndex","pkmn","toLowerCase","level"],"mappings":"slBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,IAAT,CAAeC,KAAf,CAAsBC,QAAtB,KAAsC,kBAAtC,CAEA,OAASC,WAAT,KAA4B,4BAA5B,CACA,OAASC,eAAT,KAAgC,gCAAhC,CAEA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CAEA,OAASC,aAAT,KAA8B,2BAA9B,CACA,MAAOC,CAAAA,OAAP,KAAoB,SAApB,CACA,MAAO,GAAKC,CAAAA,WAAZ,KAA6B,qBAA7B,CAEA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,iBACAV,UAAU,CAACI,WAAD,CADV,CACvBO,IADuB,aACvBA,IADuB,CACjBC,YADiB,aACjBA,YADiB,kBAEuBZ,UAAU,CAACK,eAAD,CAFjC,CAEvBQ,SAFuB,cAEvBA,SAFuB,CAEZC,sBAFY,cAEZA,sBAFY,CAEYC,MAFZ,cAEYA,MAFZ,CAI/B,GAAMC,CAAAA,QAAQ,CAAGL,IAAI,CAACM,SAAL,CAAeC,MAAf,CAAsB,SAAAF,QAAQ,QAAIA,CAAAA,QAAQ,CAACG,EAAT,GAAgBN,SAApB,EAA9B,CAAjB,CAJ+B,cAMHd,QAAQ,CAAC,CACnCqB,aAAa,CAAE,EADoB,CAChB;AACnBC,SAAS,CAAE,EAFwB,CAGnCC,cAAc,CAAE,EAHmB,CAInCC,UAAU,CAAE,EAJuB,CAKnCC,aAAa,CAAE,EALoB,CAMnCC,SAAS,CAAE,EANwB,CAOnCC,cAAc,CAAE,EAPmB,CAQnCC,UAAU,CAAE,EARuB,CASnCC,YAAY,CAAE,EATqB,CAAD,CANL,wCAMxBC,MANwB,eAMhBC,SANgB,eAkB/B,GAAI,CAACnB,IAAI,CAACoB,WAAN,EAAqB,CAAClB,SAAS,CAACmB,IAAV,EAA1B,CAA4C,CAC1C,mBACE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,kBAAlB,eACE,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EADF,CADF,CAKD,CAED,GAAMC,CAAAA,OAAO,CAAGzB,OAAO,CAAC0B,GAAR,GAAcC,IAAd,CAAmB,SAACC,CAAD,CAAIC,CAAJ,CAAU,CAC3C,MAAOD,CAAAA,CAAC,CAAGC,CAAJ,CAAQ,CAAR,CACLD,CAAC,CAAGC,CAAJ,CAAQ,CAAC,CAAT,CAAa,CADf,CAED,CAHe,CAAhB,CAKA,GAAMC,CAAAA,gBAAgB,CAAGL,OAAO,CAACM,GAAR,CAAY,SAAAvB,QAAQ,CAAI,CAC/C,mBACE,oBAAC,cAAD,EACE,GAAG,CAAER,OAAO,CAACgC,KAAR,CAAcxB,QAAd,CADP,CAEE,QAAQ,CAAEA,QAFZ,EADF,CAMD,CAPwB,CAAzB,CASA,GAAMyB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,KAAK,CAAI,mBACOA,KAAK,CAACC,MADb,CACpBC,KADoB,eACpBA,KADoB,CACbC,IADa,eACbA,IADa,CACPC,SADO,eACPA,SADO,CAG5B,GAAIA,SAAS,GAAK,iBAAlB,CAAqC,oBACnC,GAAIC,CAAAA,SAAJ,CAEA,GAAIF,IAAI,GAAK,eAAb,CAA8B,CAC5BE,SAAS,CAAG,WAAZ,CACD,CAFD,IAEO,IAAIF,IAAI,GAAK,gBAAb,CAA+B,CACpCE,SAAS,CAAG,YAAZ,CACD,CAFM,IAEA,IAAIF,IAAI,GAAK,eAAb,CAA8B,CACnCE,SAAS,CAAG,WAAZ,CACD,CAFM,IAEA,CACLA,SAAS,CAAG,YAAZ,CACD,CAEDjB,SAAS,gCACJD,MADI,uDAENkB,SAFM,CAEM,EAFN,iCAGNF,IAHM,CAGCD,KAHD,mBAAT,CAKD,CAlBD,IAkBO,CACLd,SAAS,gCACJD,MADI,wBAENgB,IAFM,CAECD,KAFD,GAAT,CAID,CACF,CA3BD,CA6BA,GAAMI,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAN,KAAK,CAAI,CAC9BA,KAAK,CAACO,cAAN,GAEA;AACA,GAAMC,CAAAA,KAAK,CAAGzC,WAAW,CAAC0C,QAAZ,CAAqBtB,MAArB,CAAd,CAEA;AACA,GAAMuB,CAAAA,UAAU,CAAG3C,WAAW,CAAC4C,QAAZ,CAAqBxB,MAArB,CAA6BqB,KAA7B,EAAoCX,GAApC,CAAwC,SAAAe,IAAI,CAAI,CACjE,GAAI,CAACA,IAAI,CAACtB,IAAL,EAAL,CAAkB,CAAE,MAAO,MAAP,CAAe,CAEnC,MAAOsB,CAAAA,IAAP,CACD,CAJkB,CAAnB,CAMA;AACA;AACA;AACA,GAAMC,CAAAA,OAAO,CAAGH,UAAU,CAAC,CAAD,CAAV,GAAkBpC,QAAQ,CAAC,CAAD,CAAR,CAAYA,QAA9B,EAA0CoC,UAAU,CAAC,CAAD,CAAV,GAAkB,MAA5D,CACZpC,QAAQ,CAAC,CAAD,CAAR,CAAYoC,UAAZ,CAAuB,CAAvB,CADY,CAEZA,UAAU,CAAC,CAAD,CAFd,CAIA,GAAMI,CAAAA,MAAM,CAAGJ,UAAU,CAAC,CAAD,CAAV,GAAkBpC,QAAQ,CAAC,CAAD,CAAR,CAAYoC,UAAZ,CAAuB,CAAvB,CAAlB,EAA+CA,UAAU,CAAC,CAAD,CAAV,GAAkB,MAAjE,CACXpC,QAAQ,CAAC,CAAD,CAAR,CAAYoC,UAAZ,CAAuB,CAAvB,CADW,CAEXA,UAAU,CAAC,CAAD,CAFd,CAIA,GAAMK,CAAAA,KAAK,CAAGL,UAAU,CAAC,CAAD,CAAV,GAAkBpC,QAAQ,CAAC,CAAD,CAAR,CAAYoC,UAAZ,CAAuB,CAAvB,CAAlB,EAA+CA,UAAU,CAAC,CAAD,CAAV,GAAkB,MAAjE,CACVpC,QAAQ,CAAC,CAAD,CAAR,CAAYoC,UAAZ,CAAuB,CAAvB,CADU,CAEVA,UAAU,CAAC,CAAD,CAFd,CAIA,GAAMM,CAAAA,MAAM,CAAGN,UAAU,CAAC,CAAD,CAAV,GAAkBpC,QAAQ,CAAC,CAAD,CAAR,CAAYoC,UAAZ,CAAuB,CAAvB,CAAlB,EAA+CA,UAAU,CAAC,CAAD,CAAV,GAAkB,MAAjE,CACXpC,QAAQ,CAAC,CAAD,CAAR,CAAYoC,UAAZ,CAAuB,CAAvB,CADW,CAEXA,UAAU,CAAC,CAAD,CAFd,CAIA,GAAMP,CAAAA,IAAI,CAAGhB,MAAM,CAACD,YAAP,GAAwBZ,QAAQ,CAAC,CAAD,CAAR,CAAY2C,aAApC,EAAqD9B,MAAM,CAACD,YAAP,GAAwB,EAA7E,CACTZ,QAAQ,CAAC,CAAD,CAAR,CAAY2C,aADH,CAET9B,MAAM,CAACD,YAFX,CAIAgC,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0B,CAACN,OAAD,CAAUC,MAAV,CAAkBC,KAAlB,CAAyBC,MAAzB,CAA1B,EACAE,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA4BhC,MAAM,CAACD,YAAnC,EAEA,GAAMkC,CAAAA,OAAO,CAAG,CAACP,OAAD,CAAUC,MAAV,CAAkBC,KAAlB,CAAyBC,MAAzB,CAAhB,CAEA9C,YAAY,CAAC,CAAEmD,IAAI,CAAE,sBAAR,CAAgC/C,QAAQ,CAAE,CACrDG,EAAE,CAAEH,QAAQ,CAAC,CAAD,CAAR,CAAYG,EADqC,CAErDoC,OAAO,CAAPA,OAFqD,CAE5CO,OAAO,CAAPA,OAF4C,CAEnCjB,IAAI,CAAJA,IAFmC,CAA1C,CAAD,CAAZ,CAKA9B,MAAM,CAAC,UAAD,CAAaC,QAAQ,CAAC,CAAD,CAArB,CAA0B,MAA1B,CAAN,CAEAc,SAAS,gCACJD,MADI,MAEPT,aAAa,CAAE,EAFR,CAGPC,SAAS,CAAE,EAHJ,CAIPC,cAAc,CAAE,EAJT,CAKPC,UAAU,CAAE,EALL,CAMPC,aAAa,CAAE,EANR,CAOPC,SAAS,CAAE,EAPJ,CAQPC,cAAc,CAAE,EART,CASPC,UAAU,CAAE,EATL,CAUPC,YAAY,CAAE,EAVP,GAAT,CAaAd,sBAAsB,CAACD,SAAD,CAAtB,CACD,CA9DD,CAgEA,mBACE,2BAAK,SAAS,CAAC,6BAAf,eACE,oBAAC,IAAD,EAAM,EAAE,CAAC,YAAT,eACE,yBAAG,SAAS,CAAC,8BAAb,wBADF,CADF,cAKE,2BAAK,SAAS,CAAC,sBAAf,eACE,4BAAM,QAAQ,CAAEmC,cAAhB,eACE,0BAAI,SAAS,CAAC,YAAd,wBADF,cAGE,2BAAK,SAAS,CAAC,WAAf,eACE,6BAAO,SAAS,CAAC,gBAAjB,4BADF,CAHF,cAOE,2BAAK,SAAS,CAAC,iBAAf,eACE,6BAAO,SAAS,CAAC,iBAAjB,gCADF,CAPF,cAWE,2BAAK,SAAS,CAAC,iBAAf,eAEE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,6CADF,CADF,cAKE,2BAAK,SAAS,CAAC,iBAAf,eACE,8BACE,SAAS,CAAC,iBADZ,CAEE,QAAQ,CAAEP,YAFZ,CAGE,IAAI,CAAC,eAHP,CAIE,KAAK,CAAEZ,MAAM,CAACT,aAJhB,eAME,8BAAQ,YAAY,CAAE,IAAtB,CAA4B,KAAK,CAAC,EAAlC,EAAsCJ,QAAQ,CAAC,CAAD,CAAR,CAAYA,QAAlD,CANF,CAOGsB,gBAPH,CADF,CALF,cAiBE,2BAAK,SAAS,CAAC,YAAf,eACI,6BACE,QAAQ,CAAG/B,aAAa,CAACyD,SAAd,CAAwB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACpB,IAAL,GAAchB,MAAM,CAACT,aAAP,CAAqB8C,WAArB,EAAlB,EAA5B,EAAoF,CADjG,CAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,uBAHd,CAIE,SAAS,CAAC,MAJZ,CAKE,IAAI,CAAC,WALP,CAME,KAAK,CAAErC,MAAM,CAACR,SANhB,CAOE,QAAQ,CAAEoB,YAPZ,EADJ,CAjBF,CAFF,cAgCE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,4CADF,CADF,cAKE,2BAAK,SAAS,CAAC,iBAAf,eACE,8BACE,SAAS,CAAC,iBADZ,CAEE,QAAQ,CAAEA,YAFZ,CAGE,IAAI,CAAC,gBAHP,CAIE,KAAK,CAAEZ,MAAM,CAACP,cAJhB,CAKE,QAAQ,CAAEN,QAAQ,CAAC,CAAD,CAAR,CAAYmD,KAAZ,EAAqB,EALjC,eAOE,8BAAQ,YAAY,CAAE,IAAtB,CAA4B,KAAK,CAAC,EAAlC,EAEInD,QAAQ,CAAC,CAAD,CAAR,CAAYmD,KAAZ,EAAqB,EAArB,CAA0B,gBAA1B,CAA6CnD,QAAQ,CAAC,CAAD,CAAR,CAAYoC,UAAZ,CAAuB,CAAvB,CAFjD,CAPF,CAYGd,gBAZH,CADF,CALF,cAsBE,2BAAK,SAAS,CAAC,YAAf,eACE,6BACE,QAAQ,CAAG/B,aAAa,CAACyD,SAAd,CAAwB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACpB,IAAL,GAAchB,MAAM,CAACP,cAAP,CAAsB4C,WAAtB,EAAlB,EAA5B,EAAqF,CADlG,CAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,uBAHd,CAIE,SAAS,CAAC,MAJZ,CAKE,IAAI,CAAC,YALP,CAME,KAAK,CAAErC,MAAM,CAACN,UANhB,CAOE,QAAQ,CAAEkB,YAPZ,EADF,CAtBF,CAhCF,cAmEE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,2CADF,CADF,cAKE,2BAAK,SAAS,CAAC,iBAAf,eACE,8BACE,SAAS,CAAC,iBADZ,CAEE,QAAQ,CAAEA,YAFZ,CAGE,IAAI,CAAC,eAHP,CAIE,KAAK,CAAEZ,MAAM,CAACL,aAJhB,CAKE,QAAQ,CAAER,QAAQ,CAAC,CAAD,CAAR,CAAYmD,KAAZ,EAAqB,EALjC,eAOE,8BAAQ,YAAY,CAAE,IAAtB,CAA4B,KAAK,CAAC,EAAlC,EAEInD,QAAQ,CAAC,CAAD,CAAR,CAAYmD,KAAZ,EAAqB,EAArB,CAA0B,gBAA1B,CAA6CnD,QAAQ,CAAC,CAAD,CAAR,CAAYoC,UAAZ,CAAuB,CAAvB,CAFjD,CAPF,CAYGd,gBAZH,CADF,CALF,cAsBE,2BAAK,SAAS,CAAC,YAAf,eACE,6BACE,QAAQ,CAAG/B,aAAa,CAACyD,SAAd,CAAwB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACpB,IAAL,GAAchB,MAAM,CAACL,aAAP,CAAqB0C,WAArB,EAAlB,EAA5B,EAAoF,CADjG,CAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,uBAHd,CAIE,SAAS,CAAC,MAJZ,CAKE,IAAI,CAAC,WALP,CAME,KAAK,CAAErC,MAAM,CAACJ,SANhB,CAOE,QAAQ,CAAEgB,YAPZ,EADF,CAtBF,CAnEF,cAsGE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,4CADF,CADF,cAKE,2BAAK,SAAS,CAAC,iBAAf,eACE,8BACE,SAAS,CAAC,iBADZ,CAEE,QAAQ,CAAEA,YAFZ,CAGE,IAAI,CAAC,gBAHP,CAIE,KAAK,CAAEZ,MAAM,CAACH,cAJhB,CAKE,QAAQ,CAAEV,QAAQ,CAAC,CAAD,CAAR,CAAYmD,KAAZ,EAAqB,EALjC,eAOE,8BAAQ,YAAY,CAAE,IAAtB,CAA4B,KAAK,CAAC,EAAlC,EAEInD,QAAQ,CAAC,CAAD,CAAR,CAAYmD,KAAZ,EAAqB,EAArB,CAA0B,gBAA1B,CAA6CnD,QAAQ,CAAC,CAAD,CAAR,CAAYoC,UAAZ,CAAuB,CAAvB,CAFjD,CAPF,CAYGd,gBAZH,CADF,CALF,cAsBE,2BAAK,SAAS,CAAC,YAAf,eACE,6BACE,QAAQ,CAAG/B,aAAa,CAACyD,SAAd,CAAwB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACpB,IAAL,GAAchB,MAAM,CAACH,cAAP,CAAsBwC,WAAtB,EAAlB,EAA5B,EAAqF,CADlG,CAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,uBAHd,CAIE,SAAS,CAAC,MAJZ,CAKE,IAAI,CAAC,YALP,CAME,KAAK,CAAErC,MAAM,CAACF,UANhB,CAOE,QAAQ,CAAEc,YAPZ,EADF,CAtBF,CAtGF,CAXF,cAqJE,2BAAK,SAAS,CAAC,YAAf,eACE,6DAAiCzB,QAAQ,CAAC,CAAD,CAAR,CAAY2C,aAA7C,KADF,CArJF,cAwJE,2BAAK,SAAS,CAAC,YAAf,eACE,6BACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,UAFd,CAGE,IAAI,CAAC,cAHP,CAIE,KAAK,CAAE9B,MAAM,CAACD,YAJhB,CAKE,QAAQ,CAAEa,YALZ,EADF,CAxJF,cAiKE,8BAAQ,SAAS,CAAC,iBAAlB,oBAjKF,CADF,CALF,CADF,CA6KD,CAlTD,CAoTA,cAAe/B,CAAAA,kBAAf","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { Link, Route, Redirect } from 'react-router-dom';\n\nimport { UserContext } from '../../contexts/UserContext';\nimport { CreatureContext } from '../../contexts/CreatureContext';\n\nimport CreatureOption from './CreatureOption';\n\nimport { otherVersions } from '../../modules/pokemonList';\nimport pokemon from 'pokemon';\nimport * as megaMethods from '../../modules/megas';\n\nconst CreatureUpdateForm = () => {\n  const { user, userDispatch } = useContext(UserContext);\n  const { currentId, showCreatureObjectives, finish } = useContext(CreatureContext);\n\n  const creature = user.creatures.filter(creature => creature.id === currentId);\n\n  const [update, setUpdate] = useState({\n    firstCreature: '', // This represents the creature's current pokemon\n    firstMega: '',\n    secondCreature: '',\n    secondMega: '',\n    thirdCreature: '',\n    thirdMega: '',\n    fourthCreature: '',\n    fourthMega: '',\n    creatureName: ''\n  });\n\n  if (!user.accessToken || !currentId.trim()) {\n    return (\n      <Route exact path=\"/creature/update\">\n        <Redirect to=\"/\" />\n      </Route>\n    )\n  }\n\n  const pkmnArr = pokemon.all().sort((a, b) => {\n    return a > b ? 1 : \n      a < b ? -1 : 0;\n  });\n\n  const OptionComponents = pkmnArr.map(creature => {\n    return (\n      <CreatureOption \n        key={pokemon.getId(creature)}\n        creature={creature}\n      />\n    );\n  });\n\n  const handleChange = event => {\n    const { value, name, className } = event.target;\n\n    if (className === 'select-creature') {\n      let megaPlace;\n\n      if (name === 'firstCreature') {\n        megaPlace = 'firstMega';\n      } else if (name === 'secondCreature') {\n        megaPlace = 'secondMega';\n      } else if (name === 'thirdCreature') {\n        megaPlace = 'thirdMega';\n      } else {\n        megaPlace = 'fourthMega';\n      }\n\n      setUpdate({\n        ...update,\n        [megaPlace]: '',\n        [name]: value\n      });\n    } else {\n      setUpdate({\n        ...update,\n        [name]: value\n      });\n    }\n  }\n\n  const updateCreature = event => {\n    event.preventDefault();\n\n    // check megas from inputs\n    const megas = megaMethods.getMegas(update);\n\n    // assign selected versions (if any) to one array\n    const evolutions = megaMethods.putMegas(update, megas).map(item => {\n      if (!item.trim()) { return 'none' }\n\n      return item;\n    });\n\n    // check if any of the updates match the current values of the actual, unupdated creature\n    // true -> return current value\n    // false -> return update\n    const current = evolutions[0] === creature[0].creature || evolutions[0] === 'none'\n      ? creature[0].evolutions[0]\n      : evolutions[0];\n\n    const second = evolutions[1] === creature[0].evolutions[1] || evolutions[1] === 'none'\n      ? creature[0].evolutions[1]\n      : evolutions[1];\n\n    const third = evolutions[2] === creature[0].evolutions[2] || evolutions[2] === 'none'\n      ? creature[0].evolutions[2]\n      : evolutions[2];\n\n    const fourth = evolutions[3] === creature[0].evolutions[3] || evolutions[3] === 'none'\n      ? creature[0].evolutions[3]\n      : evolutions[3];\n\n    const name = update.creatureName === creature[0].creature_name || update.creatureName === ''\n      ? creature[0].creature_name\n      : update.creatureName\n\n    console.log('evolutions', [current, second, third, fourth]);\n    console.log('creatureName', update.creatureName);\n\n    const newEvos = [current, second, third, fourth];\n\n    userDispatch({ type: 'UPDATE_CREATURE_INFO', creature: {\n      id: creature[0].id,\n      current, newEvos, name\n    }});\n\n    finish('creature', creature[0], 'info');\n\n    setUpdate({\n      ...update,\n      firstCreature: '',\n      firstMega: '',\n      secondCreature: '',\n      secondMega: '',\n      thirdCreature: '',\n      thirdMega: '',\n      fourthCreature: '',\n      fourthMega: '',\n      creatureName: ''\n    });\n\n    showCreatureObjectives(currentId);\n  }\n \n  return (\n    <div className=\"creature-info creature-form\">\n      <Link to=\"/creatures\">\n        <p className=\"creatures-return-link-update\">Return to Creatures</p>\n      </Link>\n\n      <div className=\"creature-update-form\">\n        <form onSubmit={updateCreature}>\n          <h2 className=\"form-title\">Edit Your Creature!</h2>\n\n          <div className=\"evo-label\">\n            <label className=\"evo-label-text\">Creature Evolution Line</label>\n          </div>\n\n          <div className=\"label-container\">\n            <label className=\"mega-input-text\">Choose an alternate version</label>\n          </div>\n\n          <div className=\"creature-inputs\">\n\n            <div className=\"creature-input\">\n              <div className=\"creature-label\">\n                <label>Current: </label>\n              </div>\n\n              <div className=\"creature-select\">\n                <select\n                  className=\"select-creature\"\n                  onChange={handleChange}\n                  name=\"firstCreature\"\n                  value={update.firstCreature}\n                >\n                  <option defaultValue={true} value=\"\">{creature[0].creature}</option>\n                  {OptionComponents}\n                </select>\n              </div>\n\n              <div className=\"mega-input\">\n                  <input \n                    disabled={ otherVersions.findIndex(pkmn => pkmn.name === update.firstCreature.toLowerCase()) < 0 }\n                    type=\"text\"\n                    placeholder=\"none/mega/megaX/megaY\"\n                    className=\"mega\"\n                    name=\"firstMega\"\n                    value={update.firstMega}\n                    onChange={handleChange}\n                  />\n              </div>\n            </div>\n\n            <div className=\"creature-input\">\n              <div className=\"creature-label\">\n                <label>Second: </label>\n              </div>\n\n              <div className=\"creature-select\">\n                <select\n                  className=\"select-creature\"\n                  onChange={handleChange}\n                  name=\"secondCreature\"\n                  value={update.secondCreature}\n                  disabled={creature[0].level >= 15}\n                >\n                  <option defaultValue={true} value=\"\">\n                    {\n                      creature[0].level >= 15 ? 'Past evolution' : creature[0].evolutions[1]\n                    }\n                  </option>\n                  {OptionComponents}\n                </select>\n              </div>\n\n              <div className=\"mega-input\">\n                <input \n                  disabled={ otherVersions.findIndex(pkmn => pkmn.name === update.secondCreature.toLowerCase()) < 0 }\n                  type=\"text\"\n                  placeholder=\"none/mega/megaX/megaY\"\n                  className=\"mega\"\n                  name=\"secondMega\"\n                  value={update.secondMega}\n                  onChange={handleChange}\n                />\n              </div>\n            </div>\n\n            <div className=\"creature-input\">\n              <div className=\"creature-label\">\n                <label>Third: </label>\n              </div>\n\n              <div className=\"creature-select\">\n                <select\n                  className=\"select-creature\"\n                  onChange={handleChange}\n                  name=\"thirdCreature\"\n                  value={update.thirdCreature}\n                  disabled={creature[0].level >= 30}\n                >\n                  <option defaultValue={true} value=\"\">\n                  {\n                      creature[0].level >= 30 ? 'Past evolution' : creature[0].evolutions[2]\n                    }\n                  </option>\n                  {OptionComponents}\n                </select>\n              </div>\n\n              <div className=\"mega-input\">\n                <input\n                  disabled={ otherVersions.findIndex(pkmn => pkmn.name === update.thirdCreature.toLowerCase()) < 0 }\n                  type=\"text\"\n                  placeholder=\"none/mega/megaX/megaY\"\n                  className=\"mega\"\n                  name=\"thirdMega\"\n                  value={update.thirdMega}\n                  onChange={handleChange}\n                />\n              </div>\n            </div>\n\n            <div className=\"creature-input\">\n              <div className=\"creature-label\">\n                <label>Fourth: </label>\n              </div>\n\n              <div className=\"creature-select\">\n                <select\n                  className=\"select-creature\"\n                  onChange={handleChange}\n                  name=\"fourthCreature\"\n                  value={update.fourthCreature}\n                  disabled={creature[0].level >= 50}\n                >\n                  <option defaultValue={true} value=\"\">\n                  {\n                      creature[0].level >= 50 ? 'Past evolution' : creature[0].evolutions[3]\n                    }\n                  </option>\n                  {OptionComponents}\n                </select>\n              </div>\n\n              <div className=\"mega-input\">\n                <input \n                  disabled={ otherVersions.findIndex(pkmn => pkmn.name === update.fourthCreature.toLowerCase()) < 0 }\n                  type=\"text\"\n                  placeholder=\"none/mega/megaX/megaY\"\n                  className=\"mega\"\n                  name=\"fourthMega\"\n                  value={update.fourthMega}\n                  onChange={handleChange}\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"name-label\">\n            <label>Would you like to rename {creature[0].creature_name}?</label>\n          </div>\n          <div className=\"name-input\">\n            <input \n              type=\"text\"\n              placeholder=\"Socrates\"\n              name=\"creatureName\"\n              value={update.creatureName}\n              onChange={handleChange}\n            />\n          </div>\n          <button className=\"submit-form-btn\">Update Creature</button>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default CreatureUpdateForm;\n"]},"metadata":{},"sourceType":"module"}