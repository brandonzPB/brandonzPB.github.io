{"ast":null,"code":"import _regeneratorRuntime from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{UserContext}from'../../contexts/UserContext';import{Link,Route,Redirect}from'react-router-dom';import userService from'../../services/userService';import'./user.css';var UserCreateForm=function UserCreateForm(){var _useContext=useContext(UserContext),createResult=_useContext.createResult,setCreateResult=_useContext.setCreateResult;var _useState=useState({username:'',email:'',password:'',confirmPassword:''}),_useState2=_slicedToArray(_useState,2),newUser=_useState2[0],setNewUser=_useState2[1];var _useState3=useState({ref:''}),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setNewUser(_objectSpread(_objectSpread({},newUser),{},_defineProperty({},name,value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setError(_objectSpread(_objectSpread({},error),{},{ref:''}));if(!(newUser.username.trim()&&newUser.email.trim()&&newUser.password.trim())){_context.next=18;break;}if(!(newUser.password!==newUser.confirmPassword)){_context.next=5;break;}return _context.abrupt(\"return\",setError(_objectSpread(_objectSpread({},error),{},{ref:'password'})));case 5:_context.next=7;return userService.createUser(newUser);case 7:result=_context.sent;if(!(result.result==='Success')){_context.next=12;break;}return _context.abrupt(\"return\",setCreateResult(_objectSpread(_objectSpread({},createResult),{},{success:true})));case 12:if(!(result.result==='Email error')){_context.next=16;break;}return _context.abrupt(\"return\",setError(_objectSpread(_objectSpread({},error),{},{ref:'email'})));case 16:if(!(result.result==='Username error')){_context.next=18;break;}return _context.abrupt(\"return\",setError(_objectSpread(_objectSpread({},error),{},{ref:'username'})));case 18:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();if(createResult.success){return/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/user/create\"},/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}));}return/*#__PURE__*/React.createElement(\"div\",{className:\"user-create-page\"},createResult.success?/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/user/create\"},/*#__PURE__*/React.createElement(Redirect,{to:\"/\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"create-user-form-container\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"p\",{className:\"return-home-link\"},\"Return Home\")),/*#__PURE__*/React.createElement(\"div\",{className:\"username-err\",style:{display:error.ref==='username'?'flex':'none'}},/*#__PURE__*/React.createElement(\"span\",{className:\"create-error-text\"},\"Username already exists\")),/*#__PURE__*/React.createElement(\"div\",{className:\"email-err\",style:{display:error.ref==='email'?'flex':'none'}},/*#__PURE__*/React.createElement(\"span\",{className:\"create-error-text\"},\"Email already exists\")),/*#__PURE__*/React.createElement(\"div\",{className:\"password-err\",style:{display:error.ref==='password'?'flex':'none'}},/*#__PURE__*/React.createElement(\"span\",{className:\"create-error-text\"},\"Passwords Do Not Match\")),/*#__PURE__*/React.createElement(\"div\",{className:\"create-user-form\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"span\",{className:\"create-user-title\"},\"Create a New User\"),/*#__PURE__*/React.createElement(\"div\",{className:\"username-create\"},/*#__PURE__*/React.createElement(\"label\",null,\"Username: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"username\",value:newUser.username,required:true,minLength:2,onChange:handleChange,style:{border:error.ref==='username'?'2px solid red':'none'}})),/*#__PURE__*/React.createElement(\"div\",{className:\"email-create\"},/*#__PURE__*/React.createElement(\"label\",null,\"Email: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",name:\"email\",value:newUser.email,required:true,onChange:handleChange,style:{border:error.ref==='email'?'2px solid red':'none'}})),/*#__PURE__*/React.createElement(\"div\",{className:\"password-create\"},/*#__PURE__*/React.createElement(\"label\",null,\"Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",value:newUser.password,required:true,minLength:5,onChange:handleChange,style:{border:error.ref==='password'?'2px solid red':'none'}})),/*#__PURE__*/React.createElement(\"div\",{className:\"confirm-password-create\"},/*#__PURE__*/React.createElement(\"label\",null,\"Confirm Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"confirmPassword\",value:newUser.confirmPassword,required:true,minLength:5,onChange:handleChange,style:{border:error.ref==='password'?'2px solid red':'none'}})),/*#__PURE__*/React.createElement(\"div\",{className:\"create-user-btn-container\"},/*#__PURE__*/React.createElement(\"button\",{className:\"create-user-btn\"},\"Create User\"))))));};export default UserCreateForm;","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/components/user/UserCreateForm.js"],"names":["React","useState","useContext","UserContext","Link","Route","Redirect","userService","UserCreateForm","createResult","setCreateResult","username","email","password","confirmPassword","newUser","setNewUser","ref","error","setError","handleChange","event","target","name","value","handleSubmit","preventDefault","trim","createUser","result","success","display","border"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { UserContext } from '../../contexts/UserContext';\nimport { Link, Route, Redirect } from 'react-router-dom';\nimport userService from '../../services/userService';\nimport './user.css';\n\nconst UserCreateForm = () => {\n  const { createResult, setCreateResult } = useContext(UserContext);\n\n  const [newUser, setNewUser] = useState({\n    username: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n  });\n\n  const [error, setError] = useState({ ref: '' });\n\n  const handleChange = event => {\n    const { name, value } = event.target;\n\n    setNewUser({\n      ...newUser,\n      [name]: value\n    });\n  }\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    setError({\n      ...error,\n      ref: ''\n    });\n\n    if (newUser.username.trim() && newUser.email.trim() && newUser.password.trim()) {\n      if (newUser.password !== newUser.confirmPassword) {\n        return setError({\n          ...error,\n          ref: 'password'\n        });\n      }\n\n      const result = await userService.createUser(newUser);\n\n      if (result.result === 'Success') {\n        return setCreateResult({\n          ...createResult,\n          success: true\n        });\n      } else if (result.result === 'Email error') {\n        return setError({\n          ...error,\n          ref: 'email'\n        });\n      } else if (result.result === 'Username error') {\n        return setError({\n          ...error,\n          ref: 'username'\n        });\n      }\n    }\n  }\n\n  if (createResult.success) {\n    return (\n      <Route exact path=\"/user/create\">\n        <Redirect to=\"/\" />\n      </Route>\n    )\n  }\n\n  return (\n    <div className=\"user-create-page\">\n      {\n          createResult.success ?\n            <Route exact path=\"/user/create\">\n              <Redirect to=\"/\" />\n            </Route> :\n            <div className=\"create-user-form-container\">\n              <Link to=\"/\">\n                <p className=\"return-home-link\">Return Home</p>\n              </Link>\n\n              <div className=\"username-err\" style={{ display: error.ref === 'username' ? 'flex' : 'none'}}>\n                <span className=\"create-error-text\">Username already exists</span>\n              </div>\n              <div className=\"email-err\" style={{ display: error.ref === 'email' ? 'flex' : 'none'}}>\n                <span className=\"create-error-text\">Email already exists</span>\n              </div>\n              <div className=\"password-err\" style={{ display: error.ref === 'password' ? 'flex' : 'none'}}>\n                <span className=\"create-error-text\">Passwords Do Not Match</span>\n              </div>\n\n              <div className=\"create-user-form\">\n                <form onSubmit={handleSubmit}>\n                  <span className=\"create-user-title\">Create a New User</span>\n                  <div className=\"username-create\">\n                    <label>Username: </label>\n                    <input \n                      type=\"text\"\n                      name=\"username\"\n                      value={newUser.username}\n                      required={true}\n                      minLength={2}\n                      onChange={handleChange}\n                      style={{\n                        border: error.ref === 'username' ? '2px solid red' : 'none'\n                      }}\n                    />\n                  </div>\n\n                  <div className=\"email-create\">\n                    <label>Email: </label>\n                    <input \n                      type=\"email\"\n                      name=\"email\"\n                      value={newUser.email}\n                      required={true}\n                      onChange={handleChange}\n                      style={{\n                        border: error.ref === 'email' ? '2px solid red' : 'none'\n                      }}\n                    />\n                  </div>\n                  \n                  <div className=\"password-create\">\n                    <label>Password: </label>\n                    <input \n                      type=\"password\"\n                      name=\"password\"\n                      value={newUser.password}\n                      required={true}\n                      minLength={5}\n                      onChange={handleChange}\n                      style={{\n                        border: error.ref === 'password' ? '2px solid red' : 'none'\n                      }}\n                    />\n                  </div>\n\n                  <div className=\"confirm-password-create\">\n                    <label>Confirm Password: </label>\n                    <input \n                      type=\"password\"\n                      name=\"confirmPassword\"\n                      value={newUser.confirmPassword}\n                      required={true}\n                      minLength={5}\n                      onChange={handleChange}\n                      style={{\n                        border: error.ref === 'password' ? '2px solid red' : 'none'\n                      }}\n                    />\n                  </div>\n                \n                  <div className=\"create-user-btn-container\">\n                    <button className=\"create-user-btn\">Create User</button>\n                  </div>\n                </form>\n              </div>\n            </div>\n        }\n    </div>\n  )\n}\n\nexport default UserCreateForm;\n"]},"metadata":{},"sourceType":"module"}