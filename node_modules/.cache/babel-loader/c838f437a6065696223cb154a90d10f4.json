{"ast":null,"code":"import _slicedToArray from\"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useReducer,useEffect,createContext}from'react';import creatureReducer from'../reducers/creatureReducer';import*as objective from'../modules/objective';import*as streakTime from'../modules/age';export var CreatureContext=createContext();var CreatureContextProvider=function CreatureContextProvider(props){var _useReducer=useReducer(creatureReducer,[],function(){var storedCreatures=localStorage.getItem('my-creatures');// localStorage.clear();\nreturn storedCreatures?JSON.parse(storedCreatures):[];}),_useReducer2=_slicedToArray(_useReducer,2),creatures=_useReducer2[0],dispatch=_useReducer2[1];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),play=_useState4[0],setPlay=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),formDisplay=_useState6[0],setFormDisplay=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),expUpdate=_useState8[0],setExpUpdate=_useState8[1];// Remove this hook once user is able to log in\n// And creatures are stored to database under account\nuseEffect(function(){localStorage.setItem('my-creatures',JSON.stringify(creatures));},[creatures]);var getExp=function getExp(creature,habit,time){if(creature.isNoob)return getFirstExp(creature);var streakCount=creature.streak?creature.streak.count:0;var newExp=objective.calcExp(creature.multiplier,streakCount,habit.difficulty,time);var newTotal=creature.exp+newExp;var newSurplus=newTotal>=creature.expGoal?newTotal-creature.expGoal:creature.expSurplus+newExp;dispatch({type:'ADD_EXP',creature:{id:creature.id,newTotal:newTotal,newSurplus:newSurplus}});return creature;};var getFirstExp=function getFirstExp(creature){var newTotal=1;var newSurplus=0;dispatch({type:'ADD_EXP',creature:{id:creature.id,newTotal:newTotal,newSurplus:newSurplus}});return creature;};var toggleExpUpdate=function toggleExpUpdate(){setExpUpdate(!expUpdate);};var toggleFormDisplay=function toggleFormDisplay(){setFormDisplay(!formDisplay);};var sendCreatureId=function sendCreatureId(id){return setCurrentId(id);};var togglePlay=function togglePlay(){setPlay(!play);};var checkObjectiveText=function checkObjectiveText(creatureId,text){var creatureInfo=creatures.filter(function(being){return being.id===creatureId;});var objectiveIndex=creatureInfo[0].objectives.findIndex(function(item){return item.text.toLowerCase()===text.toLowerCase();});return objectiveIndex>=0?true:false;};return/*#__PURE__*/React.createElement(CreatureContext.Provider,{value:{creatures:creatures,currentId:currentId,play:play,togglePlay:togglePlay,formDisplay:formDisplay,toggleFormDisplay:toggleFormDisplay,expUpdate:expUpdate,toggleExpUpdate:toggleExpUpdate,dispatch:dispatch,sendCreatureId:sendCreatureId,getExp:getExp,checkObjectiveText:checkObjectiveText}},props.children);};export default CreatureContextProvider;","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/contexts/CreatureContext.js"],"names":["React","useState","useReducer","useEffect","createContext","creatureReducer","objective","streakTime","CreatureContext","CreatureContextProvider","props","storedCreatures","localStorage","getItem","JSON","parse","creatures","dispatch","currentId","setCurrentId","play","setPlay","formDisplay","setFormDisplay","expUpdate","setExpUpdate","setItem","stringify","getExp","creature","habit","time","isNoob","getFirstExp","streakCount","streak","count","newExp","calcExp","multiplier","difficulty","newTotal","exp","newSurplus","expGoal","expSurplus","type","id","toggleExpUpdate","toggleFormDisplay","sendCreatureId","togglePlay","checkObjectiveText","creatureId","text","creatureInfo","filter","being","objectiveIndex","objectives","findIndex","item","toLowerCase","children"],"mappings":"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","sourcesContent":["import React, { useState, useReducer, useEffect, createContext } from 'react';\nimport creatureReducer from '../reducers/creatureReducer';\nimport * as objective from '../modules/objective'\nimport * as streakTime from '../modules/age';\n\nexport const CreatureContext = createContext();\n\nconst CreatureContextProvider = (props) => {\n  const [creatures, dispatch] = useReducer(creatureReducer, [], () => {\n    const storedCreatures = localStorage.getItem('my-creatures');\n    // localStorage.clear();\n    return storedCreatures ? JSON.parse(storedCreatures) : [];\n  });\n\n  const [currentId, setCurrentId] = useState('');\n  const [play, setPlay] = useState(false);\n  const [formDisplay, setFormDisplay] = useState(true);\n  const [expUpdate, setExpUpdate] = useState(false);\n\n  // Remove this hook once user is able to log in\n  // And creatures are stored to database under account\n  useEffect(() => {\n    localStorage.setItem('my-creatures', JSON.stringify(creatures));\n  }, [creatures]);\n\n  const getExp = (creature, habit, time) => { \n    if (creature.isNoob) return getFirstExp(creature);\n\n    const streakCount = creature.streak ? creature.streak.count : 0;\n\n    const newExp = objective.calcExp(creature.multiplier, streakCount, habit.difficulty, time);\n    const newTotal = creature.exp + newExp;\n\n    const newSurplus = (newTotal >= creature.expGoal) ? \n      newTotal - creature.expGoal :\n      creature.expSurplus + newExp;\n\n    dispatch({ type: 'ADD_EXP', creature: {\n      id: creature.id,\n      newTotal,\n      newSurplus\n    }});\n\n    return creature;\n  }\n\n  const getFirstExp = creature => {\n    const newTotal = 1;\n    const newSurplus = 0;\n\n    dispatch({ type: 'ADD_EXP', creature: { id: creature.id, newTotal, newSurplus } });\n\n    return creature;\n  }\n\n  const toggleExpUpdate = () => {\n    setExpUpdate(!expUpdate);\n  }\n\n  const toggleFormDisplay = () => {\n    setFormDisplay(!formDisplay);\n  }\n\n  const sendCreatureId = id => {\n    return setCurrentId(id);\n  }\n\n  const togglePlay = () => {\n    setPlay(!play);\n  }\n\n  const checkObjectiveText = (creatureId, text) => {\n    const creatureInfo = creatures.filter(being => being.id === creatureId);\n\n    const objectiveIndex = creatureInfo[0].objectives.findIndex(item => item.text.toLowerCase() === text.toLowerCase());\n    return (objectiveIndex >= 0) ? true : false;\n  }\n\n  return (\n    <CreatureContext.Provider \n      value={{\n        creatures, \n        currentId,\n        play,\n        togglePlay,\n        formDisplay,\n        toggleFormDisplay,\n        expUpdate,\n        toggleExpUpdate,\n        dispatch,\n        sendCreatureId,\n        getExp,\n        checkObjectiveText,\n      }}>\n      {props.children}\n    </CreatureContext.Provider>\n  )\n}\n\nexport default CreatureContextProvider;\n"]},"metadata":{},"sourceType":"module"}