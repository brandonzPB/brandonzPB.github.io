{"ast":null,"code":"var _jsxFileName = \"/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/contexts/CreatureContext.js\";\nimport React, { useState, useReducer, useEffect, useContext, createContext } from 'react';\nimport creatureReducer from '../reducers/creatureReducer';\nimport * as objective from '../modules/objective';\nimport * as streakTime from '../modules/age';\nimport creatureService from '../services/creatureService';\nimport UserContextProvider, { UserContext } from './UserContext';\nexport const CreatureContext = createContext();\n\nconst CreatureContextProvider = props => {\n  const {\n    user,\n    userDispatch,\n    userLoading\n  } = useContext(UserContext);\n  const [loading, setLoading] = useState(true);\n  const [creatures, dispatch] = useReducer(creatureReducer, [], () => {\n    if (userLoading) return;\n    if (!loading) setLoading(!loading);\n    const creatures = localStorage.getItem('my-user');\n    const storedCreatures = creatures ? JSON.parse(creatures) : [];\n    setLoading(!loading);\n    return storedCreatures.creatures;\n  });\n  useEffect(() => {\n    userDispatch({\n      type: 'UPDATE_CREATURES',\n      creatures: {\n        creatures: creatures\n      }\n    });\n    localStorage.setItem('my-user', JSON.stringify(user));\n  }, [creatures]);\n  /* const [creatures, dispatch] = useReducer(creatureReducer, [], () => {\n    const storedCreatures = localStorage.getItem('my-creatures');\n    return storedCreatures ? JSON.parse(storedCreatures) : [];\n  });\n   useEffect(() => {\n    localStorage.setItem('my-creatures', JSON.stringify(creatures));\n  }, [creatures]); */\n\n  const [currentId, setCurrentId] = useState('');\n  const [play, setPlay] = useState(false);\n  const [formDisplay, setFormDisplay] = useState(true);\n  const [expUpdate, setExpUpdate] = useState(false); // CREATE creature\n\n  const createCreature = creatureObject => {\n    console.log('creatures', creatures);\n    console.log('creature', creatureObject);\n    creatureService.createCreature(user.db_id, creatureObject, user.accessToken).then(res => res).catch(err => console.error(err));\n    console.log('Successfully added creature');\n  }; // UPDATE creature stats\n\n\n  const updateCreatureStats = async creatureId => {\n    const creature = creatures.filter(being => being.id === creatureId);\n    await creatureService.updateCreatureStats(user.db_id, creatureId, creature, user.accessToken).then(res => res).catch(err => console.error(err));\n    dispatch({\n      type: 'UPDATE_CREATURE',\n      creature: {\n        exp: creature.exp,\n        exp_goal: creature.exp_goal,\n        exp_surplus: creature.exp_surplus,\n        prev_exp_goal: creature.prev_exp_goal,\n        difficulty: creature.difficulty,\n        multiplier: creature.multiplier,\n        pokeball_number: creature.pokeball_number\n      }\n    });\n    console.log('Successfully added creature');\n  }; // UPDATE creature objectives\n\n\n  const updateCreatureObjectves = async creatureId => {\n    const creature = creatures.filter(being => being.id === creatureId);\n    await creatureService.updateCreatureObjectves(user.db_id, creatureId, creature, user.accessToken).then(res => res).catch(err => console.error(err));\n    dispatch({\n      type: 'UPDATE_CREATURE',\n      creature: {\n        objectives: creature.objectives\n      }\n    });\n    console.log('Successfully added creature');\n  }; // UPDATE creature info\n\n\n  const updateCreatureInfo = async creatureId => {\n    const creature = creatures.filter(being => being.id === creatureId);\n    await creatureService.updateCreatureObjectves(user.db_id, creatureId, creature, user.accessToken).then(res => res).catch(err => console.error(err));\n    dispatch({\n      type: 'UPDATE_CREATURE',\n      creature: {\n        creature_name: creature.creature_name,\n        evolutions: creature.evolutions\n      }\n    });\n    console.log('Successfully added creature');\n  }; // DELETE creature\n\n\n  const deleteCreature = async creatureId => {\n    const creature = user.creatures.filter(being => being.id === creatureId);\n    await creatureService.deleteCreature(user.db_id, creature._id, creature, user.accessToken).then(res => res).catch(err => console.error(err));\n    dispatch({\n      type: 'DELETE_CREATURE',\n      creature: {\n        creature\n      }\n    });\n    console.log('Successfully deleted creature: ' + creature);\n  };\n\n  const getExp = (creature, habit, time) => {\n    if (creature.is_noob) return getFirstExp(creature);\n    const streakCount = creature.streak_count;\n    const newExp = objective.calcExp(creature.multiplier, streakCount, habit.difficulty, time);\n    const newTotal = creature.exp + newExp;\n    const newSurplus = newTotal >= creature.exp_goal ? newTotal - creature.exp_goal : creature.exp_surplus + newExp;\n    dispatch({\n      type: 'ADD_EXP',\n      creature: {\n        id: creature.id,\n        newTotal,\n        newSurplus\n      }\n    });\n    return creature;\n  };\n\n  const getFirstExp = creature => {\n    const newTotal = 1;\n    const newSurplus = 0;\n    dispatch({\n      type: 'ADD_EXP',\n      creature: {\n        id: creature.id,\n        newTotal,\n        newSurplus\n      }\n    });\n    return creature;\n  };\n\n  const toggleExpUpdate = () => {\n    setExpUpdate(!expUpdate);\n  };\n\n  const toggleFormDisplay = () => {\n    setFormDisplay(!formDisplay);\n  };\n\n  const sendCreatureId = id => {\n    return setCurrentId(id);\n  };\n\n  const togglePlay = () => {\n    setPlay(!play);\n  };\n\n  const checkObjectiveText = (creatureId, text) => {\n    const creatureInfo = creatures.filter(being => being.id === creatureId);\n    const objectiveIndex = creatureInfo[0].objectives.findIndex(item => item.text.toLowerCase() === text.toLowerCase());\n    return objectiveIndex >= 0 ? true : false;\n  };\n\n  return /*#__PURE__*/React.createElement(CreatureContext.Provider, {\n    value: {\n      creatures,\n      loading,\n      createCreature,\n      updateCreatureStats,\n      updateCreatureObjectves,\n      updateCreatureInfo,\n      deleteCreature,\n      currentId,\n      play,\n      togglePlay,\n      formDisplay,\n      toggleFormDisplay,\n      expUpdate,\n      toggleExpUpdate,\n      dispatch,\n      sendCreatureId,\n      getExp,\n      checkObjectiveText\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport default CreatureContextProvider;","map":{"version":3,"sources":["/home/brandonzpb/Documents/projects/custom/creatures-of-habit/creatures-frontend/src/contexts/CreatureContext.js"],"names":["React","useState","useReducer","useEffect","useContext","createContext","creatureReducer","objective","streakTime","creatureService","UserContextProvider","UserContext","CreatureContext","CreatureContextProvider","props","user","userDispatch","userLoading","loading","setLoading","creatures","dispatch","localStorage","getItem","storedCreatures","JSON","parse","type","setItem","stringify","currentId","setCurrentId","play","setPlay","formDisplay","setFormDisplay","expUpdate","setExpUpdate","createCreature","creatureObject","console","log","db_id","accessToken","then","res","catch","err","error","updateCreatureStats","creatureId","creature","filter","being","id","exp","exp_goal","exp_surplus","prev_exp_goal","difficulty","multiplier","pokeball_number","updateCreatureObjectves","objectives","updateCreatureInfo","creature_name","evolutions","deleteCreature","_id","getExp","habit","time","is_noob","getFirstExp","streakCount","streak_count","newExp","calcExp","newTotal","newSurplus","toggleExpUpdate","toggleFormDisplay","sendCreatureId","togglePlay","checkObjectiveText","text","creatureInfo","objectiveIndex","findIndex","item","toLowerCase","children"],"mappings":"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","sourcesContent":["import React, { useState, useReducer, useEffect, useContext, createContext } from 'react';\nimport creatureReducer from '../reducers/creatureReducer';\nimport * as objective from '../modules/objective'\nimport * as streakTime from '../modules/age';\nimport creatureService from '../services/creatureService';\nimport UserContextProvider, { UserContext } from './UserContext';\n\nexport const CreatureContext = createContext();\n\nconst CreatureContextProvider = (props) => {\n  const { user, userDispatch, userLoading } = useContext(UserContext);\n\n  const [loading, setLoading] = useState(true);\n\n  const [creatures, dispatch] = useReducer(creatureReducer, [], () => {\n    if (userLoading) return;\n    \n    if(!loading) setLoading(!loading);\n\n    const creatures = localStorage.getItem('my-user');\n    const storedCreatures = creatures ? JSON.parse(creatures) : [];\n\n    setLoading(!loading);\n\n    return storedCreatures.creatures;\n  });\n\n  useEffect(() => {\n    userDispatch({ type: 'UPDATE_CREATURES', creatures: { creatures: creatures }});\n    localStorage.setItem('my-user', JSON.stringify(user));\n  }, [creatures]);\n\n  /* const [creatures, dispatch] = useReducer(creatureReducer, [], () => {\n    const storedCreatures = localStorage.getItem('my-creatures');\n    return storedCreatures ? JSON.parse(storedCreatures) : [];\n  });\n\n  useEffect(() => {\n    localStorage.setItem('my-creatures', JSON.stringify(creatures));\n  }, [creatures]); */\n\n  const [currentId, setCurrentId] = useState('');\n  const [play, setPlay] = useState(false);\n  const [formDisplay, setFormDisplay] = useState(true);\n  const [expUpdate, setExpUpdate] = useState(false);\n\n  // CREATE creature\n  const createCreature = creatureObject => {\n    console.log('creatures', creatures);\n\n    console.log('creature', creatureObject);\n\n    creatureService.createCreature(user.db_id, creatureObject, user.accessToken)\n      .then(res => res)\n      .catch(err => console.error(err));\n\n    console.log('Successfully added creature');\n  }\n\n  // UPDATE creature stats\n  const updateCreatureStats = async (creatureId) => {\n    const creature = creatures.filter(being => being.id === creatureId);\n\n    await creatureService.updateCreatureStats(user.db_id, creatureId, creature, user.accessToken)\n      .then(res => res)\n      .catch(err => console.error(err));\n\n    dispatch({ type: 'UPDATE_CREATURE', creature: {\n      exp: creature.exp,\n      exp_goal: creature.exp_goal,\n      exp_surplus: creature.exp_surplus,\n      prev_exp_goal: creature.prev_exp_goal,\n      difficulty: creature.difficulty,\n      multiplier: creature.multiplier,\n      pokeball_number: creature.pokeball_number,\n    }});\n\n    console.log('Successfully added creature');\n  }\n\n  // UPDATE creature objectives\n  const updateCreatureObjectves = async (creatureId) => {\n    const creature = creatures.filter(being => being.id === creatureId);\n\n    await creatureService.updateCreatureObjectves(user.db_id, creatureId, creature, user.accessToken)\n      .then(res => res)\n      .catch(err => console.error(err));\n\n    dispatch({ type: 'UPDATE_CREATURE', creature: {\n      objectives: creature.objectives,\n    }});\n\n    console.log('Successfully added creature');\n  }\n\n  // UPDATE creature info\n  const updateCreatureInfo = async (creatureId) => {\n    const creature = creatures.filter(being => being.id === creatureId);\n\n    await creatureService.updateCreatureObjectves(user.db_id, creatureId, creature, user.accessToken)\n      .then(res => res)\n      .catch(err => console.error(err));\n\n    dispatch({ type: 'UPDATE_CREATURE', creature: {\n      creature_name: creature.creature_name,\n      evolutions: creature.evolutions,\n    }});\n\n    console.log('Successfully added creature');\n  }\n\n  // DELETE creature\n  const deleteCreature = async (creatureId) => {\n    const creature = user.creatures.filter(being => being.id === creatureId);\n\n    await creatureService.deleteCreature(user.db_id, creature._id, creature, user.accessToken)\n      .then(res => res)\n      .catch(err => console.error(err));\n    \n    dispatch({ type: 'DELETE_CREATURE', creature: { creature }});\n\n    console.log('Successfully deleted creature: ' + creature);\n  }\n\n  const getExp = (creature, habit, time) => { \n    if (creature.is_noob) return getFirstExp(creature);\n\n    const streakCount = creature.streak_count;\n\n    const newExp = objective.calcExp(creature.multiplier, streakCount, habit.difficulty, time);\n    const newTotal = creature.exp + newExp;\n\n    const newSurplus = (newTotal >= creature.exp_goal) ? \n      newTotal - creature.exp_goal :\n      creature.exp_surplus + newExp;\n\n    dispatch({ type: 'ADD_EXP', creature: {\n      id: creature.id,\n      newTotal,\n      newSurplus\n    }});\n\n    return creature;\n  }\n\n  const getFirstExp = creature => {\n    const newTotal = 1;\n    const newSurplus = 0;\n\n    dispatch({ type: 'ADD_EXP', creature: { id: creature.id, newTotal, newSurplus } });\n\n    return creature;\n  }\n\n  const toggleExpUpdate = () => {\n    setExpUpdate(!expUpdate);\n  }\n\n  const toggleFormDisplay = () => {\n    setFormDisplay(!formDisplay);\n  }\n\n  const sendCreatureId = id => {\n    return setCurrentId(id);\n  }\n\n  const togglePlay = () => {\n    setPlay(!play);\n  }\n\n  const checkObjectiveText = (creatureId, text) => {\n    const creatureInfo = creatures.filter(being => being.id === creatureId);\n\n    const objectiveIndex = creatureInfo[0].objectives.findIndex(item => item.text.toLowerCase() === text.toLowerCase());\n    return (objectiveIndex >= 0) ? true : false;\n  }\n\n  return (\n    <CreatureContext.Provider \n      value={{\n        creatures,\n        loading,\n        createCreature,\n        updateCreatureStats,\n        updateCreatureObjectves,\n        updateCreatureInfo,\n        deleteCreature, \n        currentId,\n        play,\n        togglePlay,\n        formDisplay,\n        toggleFormDisplay,\n        expUpdate,\n        toggleExpUpdate,\n        dispatch,\n        sendCreatureId,\n        getExp,\n        checkObjectiveText,\n      }}>\n      {props.children}\n    </CreatureContext.Provider>\n  )\n}\n\nexport default CreatureContextProvider;\n"]},"metadata":{},"sourceType":"module"}